<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Econnect | Plataforma de Sostenibilidad Ambiental</title>
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMjJjNTVlIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+PHBhdGggZD0iTTIxIDEyYzAgMS4xLS45IDItMiAySDVjLTEuMSAwLTItLjktMi0yVjZjMC0xLjEuOS0yIDItMmgxNGMxLjEgMCAyIC45IDIgMnYxeiI+PC9wYXRoPjxwYXRoIGQ9Ik02IDEyaDEydjhjMCAxLjEtLjkgMi0yIDJIOGMtMS4xIDAtMi0uOS0yLTJ2LTh6Ij48L3BhdGg+PHBhdGggZD0iTTEyIDEyVjIyIj48L3BhdGg+PHBhdGggZD0iTTEyIDJ2NCIgc3Ryb2tlPSIjMjJjNTVlIj48L3BhdGg+PHBhdGggZD0iTTE2IDEyYzAgMi4yLTEuOCA0LTQgNC0yLjIgMC00LTEuOC00LTQgMC0yLjIgMS44LTQgNC00IDIuMiAwIDQgMS44IDQgNHoiIGZpbGw9IiMyMmM1NWUiIHN0cm9rZT0ibm9uZSI+PC9wYXRoPjwvc3ZnPg==" />
    <link rel="shortcut icon" type="image/svg+xml" href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMjJjNTVlIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+PHBhdGggZD0iTTIxIDEyYzAgMS4xLS45IDItMiAySDVjLTEuMSAwLTItLjktMi0yVjZjMC0xLjEuOS0yIDItMmgxNGMxLjEgMCAyIC45IDIgMnYxeiI+PC9wYXRoPjxwYXRoIGQ9Ik02IDEyaDEydjhjMCAxLjEtLjkgMi0yIDJIOGMtMS4xIDAtMi0uOS0yLTJ2LTh6Ij48L3BhdGg+PHBhdGggZD0iTTEyIDEyVjIyIj48L3BhdGg+PHBhdGggZD0iTTEyIDJ2NCIgc3Ryb2tlPSIjMjJjNTVlIj48L3BhdGg+PHBhdGggZD0iTTE2IDEyYzAgMi4yLTEuOCA0LTQgNC0yLjIgMC00LTEuOC00LTQgMC0yLjIgMS44LTQgNC00IDIuMiAwIDQgMS44IDQgNHoiIGZpbGw9IiMyMmM1NWUiIHN0cm9rZT0ibm9uZSI+PC9wYXRoPjwvc3ZnPg==" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
         :root {
            --primary-color: #22c55e;
            --primary-dark: #16a34a;
            --secondary-color: #3b82f6;
            --danger-color: #ef4444;
            --text-color: #1f2937;
            --bg-color: #f8fafc;
            --card-bg: #ffffff;
            --border-radius: 12px;
            --transition: all 0.3s ease;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background-color: var(--card-bg);
            padding: 1rem;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            width: 100%;
            flex-wrap: nowrap;
        }
        
        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            flex-shrink: 0;
        }
        
        .logo i {
            font-size: 1.8rem;
        }
        
        /* Estilos nuevos para el logo */
        .logo-text {
            background: linear-gradient(135deg, #22c55e 0%, #16a34a 50%, #15803d 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-fill-color: transparent;
            font-weight: 800;
            letter-spacing: 0.5px;
            text-shadow: 0px 0px 10px rgba(34, 197, 94, 0.2);
            position: relative;
            font-size: 1.6rem;
            animation: shimmer 3s infinite;
            background-size: 200% auto;
        }
        
        @keyframes shimmer {
            0% {
                background-position: 0% center;
            }
            50% {
                background-position: 100% center;
            }
            100% {
                background-position: 0% center;
            }
        }

        .logo-icon {
            font-size: 2rem;
            background: linear-gradient(135deg, #22c55e 0%, #16a34a 50%, #15803d 100%);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            box-shadow: 0 2px 10px rgba(34, 197, 94, 0.3);
            position: relative;
            overflow: hidden;
            animation: pulse 3s infinite ease-in-out;
        }

        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.4);
            }
            70% {
                box-shadow: 0 0 0 10px rgba(34, 197, 94, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(34, 197, 94, 0);
            }
        }

        .logo-icon::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(255,255,255,0.2) 0%, rgba(255,255,255,0) 50%);
            border-radius: 50%;
        }
        
        /* Estilo para el enlace del logo */
        .logo-link {
            text-decoration: none;
            display: flex;
            align-items: center;
            color: inherit;
            cursor: pointer;
        }
        
        .logo-link:hover {
            text-decoration: none;
            color: inherit;
        }
        
        .nav-buttons {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            align-items: center;
        }
        
        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: var(--border-radius);
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            white-space: nowrap;
        }
        
        .btn-primary {
            background-color: var(--primary-color);
            color: white;
        }
        
        .btn-primary:hover {
            background-color: var(--primary-dark);
        }
        
        .btn-secondary {
            background-color: var(--secondary-color);
            color: white;
        }
        
        .btn-danger {
            background-color: var(--danger-color);
            color: white;
        }
        
        main {
            margin-top: 80px;
            display: none;
            animation: fadeIn 0.3s ease;
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .auth-container {
            max-width: 400px;
            margin: 7rem auto 2rem auto;
            padding: 2rem;
            background-color: var(--card-bg);
            border-radius: var(--border-radius);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }
        
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }
        
        .form-group input {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #e5e7eb;
            border-radius: var(--border-radius);
            font-size: 1rem;
            transition: var(--transition);
        }
        
        .form-group input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(34, 197, 94, 0.1);
        }
        
        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }
        
        .card {
            background-color: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }
        
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }
        
        .card-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--text-color);
        }
        
        .badge {
            background-color: var(--primary-color);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 2rem;
            font-size: 0.875rem;
            font-weight: 500;
        }
        
        .progress-container {
            margin: 1rem 0;
        }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background-color: #e5e7eb;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background-color: var(--primary-color);
            transition: width 0.3s ease;
        }
        
        .challenges-grid {
            display: grid;
            gap: 1rem;
        }
        
        .challenge-card {
            background-color: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            border: 1px solid #e5e7eb;
            transition: var(--transition);
        }
        
        .challenge-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }
        
        .challenge-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }
        
        .challenge-title {
            font-weight: 600;
            color: var(--text-color);
        }
        
        .challenge-status {
            font-size: 0.875rem;
            color: var(--primary-color);
        }
        
        .rewards-list {
            display: grid;
            gap: 1rem;
        }
        
        .reward-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            background-color: #f8fafc;
            border-radius: var(--border-radius);
        }
        
        .reward-icon {
            font-size: 1.5rem;
            color: var(--primary-color);
        }
        
        .reward-info {
            flex: 1;
        }
        
        .reward-title {
            font-weight: 500;
        }
        
        .reward-description {
            font-size: 0.875rem;
            color: #64748b;
        }
        
        .file-upload {
            position: relative;
            display: inline-block;
            width: 100%;
        }
        
        .file-upload input[type="file"] {
            display: none;
        }
        
        .file-upload-label {
            display: block;
            padding: 0.75rem;
            background-color: #f8fafc;
            border: 2px dashed #e5e7eb;
            border-radius: var(--border-radius);
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .file-upload-label:hover {
            border-color: var(--primary-color);
        }
        
        @media (max-width: 768px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
            .header-content {
                padding: 0 10px;
                justify-content: space-between;
                flex-direction: row !important;
            }
            .logo {
                font-size: 1.2rem;
            }
            #auth-nav {
                flex-wrap: nowrap;
            }
            #auth-nav .btn {
                width: 40px;
                height: 40px;
                min-width: 40px;
                padding: 0;
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                margin-left: 5px;
            }
            #auth-nav .btn-text {
                display: none;
            }
        }
        
        .dashboard-section {
            display: none;
            animation: fadeIn 0.3s ease;
        }
        
        .dashboard-section.active {
            display: block;
        }
        /* Estilos para el modal de perfil */
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            animation: fadeIn 0.3s ease;
            overflow-y: auto;
            padding: 20px;
        }
        
        .modal-content {
            position: relative;
            background-color: var(--card-bg);
            margin: 5vh auto;
            padding: 2rem;
            border-radius: var(--border-radius);
            max-width: 500px;
            animation: slideIn 0.3s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        @media (max-width: 768px) {
            .modal-content {
                margin: 2vh auto;
                padding: 1.5rem;
            }
            .modal {
                padding: 10px;
            }
        }
        
        @keyframes slideIn {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
        
        .profile-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            margin-bottom: 1.5rem;
            text-align: center;
        }
        
        .stat-item {
            background-color: #f8fafc;
            padding: 1rem;
            border-radius: var(--border-radius);
        }
        
        .stat-value {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--primary-color);
        }
        
        .stat-label {
            font-size: 0.875rem;
            color: var(--text-color);
        }
        
        #formPerfil {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        
        #formPerfil .form-group {
            margin-bottom: 0;
        }
        
        #formPerfil .btn {
            margin-top: 1rem;
        }
        
        .modal-content .form-group input {
            margin-top: 0.5rem;
        }
        /* Estilos para cupones */
        
        .coupon-section {
            margin-top: 2rem;
            border-top: 1px solid #e5e7eb;
            padding-top: 2rem;
        }
        
        .coupon-card {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
            color: white;
            padding: 1.5rem;
            border-radius: var(--border-radius);
            margin-bottom: 1rem;
            position: relative;
            overflow: hidden;
        }
        
        .coupon-card::before {
            content: '';
            position: absolute;
            left: -10px;
            top: 50%;
            transform: translateY(-50%);
            width: 20px;
            height: 20px;
            background: white;
            border-radius: 50%;
            box-shadow: 20px 0 0 white, 40px 0 0 white, 60px 0 0 white, 80px 0 0 white, 100px 0 0 white, 120px 0 0 white, 140px 0 0 white, 160px 0 0 white, 180px 0 0 white, 200px 0 0 white, 220px 0 0 white, 240px 0 0 white;
            display: none;
            /* Ocultar las bolitas blancas */
        }
        
        .coupon-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }
        
        .coupon-title {
            font-size: 1.25rem;
            font-weight: 600;
        }
        
        .coupon-points {
            background: rgba(255, 255, 255, 0.2);
            padding: 0.5rem 1rem;
            border-radius: 2rem;
            font-size: 0.875rem;
        }
        
        .coupon-code {
            background: rgba(255, 255, 255, 0.1);
            padding: 0.75rem;
            border-radius: var(--border-radius);
            font-family: monospace;
            font-size: 1.25rem;
            text-align: center;
            letter-spacing: 2px;
            margin: 1rem 0;
        }
        
        .coupon-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.875rem;
        }
        
        .coupon-expiry {
            opacity: 0.8;
        }
        
        .coupon-claim {
            background: white;
            color: var(--primary-color);
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 2rem;
            cursor: pointer;
            font-weight: 500;
            transition: var(--transition);
        }
        
        .coupon-claim:hover {
            transform: translateY(-2px);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .coupon-claim:disabled {
            background: #e5e7eb;
            color: #9ca3af;
            cursor: not-allowed;
            transform: none;
        }
        /* Estilos para logos de tiendas en cupones */
        
        .coupon-store {
            display: flex;
            align-items: center;
            margin-bottom: 0.5rem;
        }
        
        .store-logo {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background-color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 0.75rem;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .store-logo i {
            font-size: 1rem;
            color: var(--primary-dark);
        }
        
        .store-name {
            font-weight: 500;
            font-size: 0.9rem;
            opacity: 0.9;
        }
        /* Colores personalizados para diferentes tiendas */
        
        .coupon-card.hm {
            background: linear-gradient(135deg, #d50032, #9e0025);
        }
        
        .coupon-card.zara {
            background: linear-gradient(135deg, #000000, #333333);
        }
        
        .coupon-card.walmart {
            background: linear-gradient(135deg, #0071ce, #004c91);
        }
        
        .coupon-card.adidas {
            background: linear-gradient(135deg, #000000, #333333);
        }
        
        .coupon-card.whole-foods {
            background: linear-gradient(135deg, #00674e, #004d3a);
        }
        
        .coupon-card.starbucks {
            background: linear-gradient(135deg, #00704a, #004c33);
        }
        
        .coupon-card.body-shop {
            background: linear-gradient(135deg, #004236, #00261f);
        }
        
        .coupon-card.patagonia {
            background: linear-gradient(135deg, #5da698, #3d7063);
        }
        
        .admin-section {
            margin-top: 2rem;
            padding: 1.5rem;
            background-color: #f8fafc;
            border-radius: var(--border-radius);
        }
        /* Estilos para el carrusel y la introducción */
        
        .intro-section {
            min-height: 100vh;
            background-color: var(--bg-color);
            padding: 4rem 1rem 2rem 1rem;
            text-align: center;
        }
        
        .carousel {
            max-width: 1000px;
            margin: 4rem auto 2rem auto;
            position: relative;
            overflow: hidden;
            border-radius: var(--border-radius);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }
        
        .carousel-inner {
            display: flex;
            transition: transform 0.5s ease;
        }
        
        .carousel-item {
            min-width: 100%;
            position: relative;
        }
        
        .carousel-item img {
            width: 100%;
            height: 500px;
            object-fit: cover;
            filter: brightness(0.85);
        }
        
        .carousel-caption {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0));
            color: white;
            padding: 2rem 1.5rem 1.5rem;
            text-align: left;
        }
        
        .carousel-caption h2 {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
        }
        
        .carousel-caption p {
            font-size: 1.1rem;
            max-width: 800px;
            margin: 0 auto;
            opacity: 0.9;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
        }
        
        .carousel-controls {
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            transform: translateY(-50%);
            display: flex;
            justify-content: space-between;
            padding: 0 1rem;
        }
        
        .carousel-control {
            background: rgba(255, 255, 255, 0.8);
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
            color: var(--primary-color);
            transition: var(--transition);
        }
        
        .carousel-control:hover {
            background: white;
            transform: scale(1.1);
        }
        
        .carousel-indicators {
            position: absolute;
            bottom: 1rem;
            left: 0;
            right: 0;
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            z-index: 1;
        }
        
        .indicator {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.5);
            cursor: pointer;
            transition: var(--transition);
        }
        
        .indicator.active {
            background: white;
            transform: scale(1.2);
        }
        
        .app-description {
            max-width: 800px;
            margin: 3rem auto;
            padding: 2rem;
            background: white;
            border-radius: var(--border-radius);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .app-description h2 {
            color: var(--primary-color);
            margin-bottom: 1.5rem;
        }
        
        .app-features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
            width: 100%;
            justify-content: center;
            text-align: center;
        }
        
        .feature-item {
            text-align: center;
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .feature-icon {
            font-size: 2.5rem;
            color: var(--primary-color);
            margin-bottom: 1rem;
        }
        
        .start-button {
            display: inline-block;
            background: var(--primary-color);
            color: white;
            padding: 1rem 2rem;
            border-radius: 2rem;
            text-decoration: none;
            margin-top: 2rem;
            transition: var(--transition);
        }
        
        .start-button:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }
        
        @media (max-width: 768px) {
            .carousel-item img {
                height: 350px;
            }
            .carousel-caption h2 {
                font-size: 1.4rem;
            }
            .carousel-caption p {
                font-size: 0.95rem;
            }
            .app-features {
                grid-template-columns: 1fr;
                max-width: 100%;
            }
        }
        /* Estilos para navegación móvil */
        
        .mobile-nav {
            display: none;
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background-color: var(--card-bg);
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
            padding: 0.75rem;
            z-index: 1000;
            justify-content: space-around;
        }
        
        .mobile-nav .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.25rem;
            background: none;
            border: none;
            color: var(--text-color);
            padding: 0.5rem;
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.875rem;
        }
        
        .mobile-nav .nav-item i {
            font-size: 1.25rem;
        }
        
        .mobile-nav .nav-item.active {
            color: var(--primary-color);
        }
        
        .mobile-nav .nav-item:hover {
            color: var(--primary-color);
        }
        /* Ajustes responsivos actualizados */
        
        @media (max-width: 768px) {
            .desktop-nav .btn-primary {
                display: none;
            }
            .mobile-nav {
                display: flex;
            }
            .container {
                padding-bottom: 80px;
            }
            main {
                margin-top: 70px;
            }
            .nav-buttons {
                gap: 0.5rem;
            }
        }
        
        @media (min-width: 769px) {
            .mobile-nav {
                display: none;
            }
            .nav-buttons {
                display: flex;
                gap: 1rem;
            }
            .btn-primary {
                background-color: var(--primary-color);
            }
            .btn-primary:hover {
                background-color: var(--primary-dark);
            }
            .btn-primary.active {
                background-color: var(--primary-dark);
            }
        }
        /* Estilo para botones de icono */
        
        .btn-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            padding: 0;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .btn-icon i {
            font-size: 1rem;
        }
        /* Tooltip para botones de icono */
        
        .btn-icon {
            position: relative;
        }
        
        .btn-icon:hover::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: -30px;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 0.3rem 0.6rem;
            border-radius: 4px;
            font-size: 0.8rem;
            white-space: nowrap;
            z-index: 1000;
            pointer-events: none;
        }
        /* Mostrar tooltip solo en desktop */
        
        @media (max-width: 768px) {
            .btn-icon:hover::after {
                display: none;
            }
        }
        /* Ajustes para versión móvil */
        
        @media (max-width: 768px) {
            .intro-section {
                padding: 4rem 0.5rem 1rem 0.5rem;
                min-height: auto;
            }
            .carousel {
                margin: 2rem auto 1rem auto;
                max-width: 100%;
            }
            .carousel-item img {
                height: 250px;
            }
            .carousel-caption {
                padding: 1rem 1rem 0.8rem;
            }
            .carousel-caption h2 {
                font-size: 1.2rem;
                margin-bottom: 0.3rem;
            }
            .carousel-caption p {
                font-size: 0.85rem;
                line-height: 1.4;
            }
            .app-description {
                margin: 1.5rem auto;
                padding: 1.5rem 1rem;
            }
            .app-description h2 {
                font-size: 1.3rem;
                margin-bottom: 1rem;
            }
            .app-description p {
                font-size: 0.9rem;
            }
            .feature-item {
                padding: 1rem 0.5rem;
            }
            .feature-icon {
                font-size: 2rem;
                margin-bottom: 0.5rem;
            }
            .feature-item h3 {
                font-size: 1.1rem;
            }
            .feature-item p {
                font-size: 0.85rem;
            }
            .start-button {
                padding: 0.8rem 1.5rem;
                font-size: 0.9rem;
            }
        }
        /* Estilos para desafíos mejorados */
        
        .challenge-filter {
            display: flex;
            align-items: center;
        }
        
        .challenge-filter select {
            padding: 0.5rem;
            border-radius: var(--border-radius);
            border: 1px solid #e5e7eb;
            background-color: white;
            font-size: 0.9rem;
        }
        
        .challenge-badges {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 0.7rem;
        }
        
        .challenge-badge {
            font-size: 0.7rem;
            padding: 0.2rem 0.5rem;
            border-radius: 1rem;
            font-weight: 500;
        }
        
        .challenge-badge.easy {
            background-color: #bbf7d0;
            color: #166534;
        }
        
        .challenge-badge.medium {
            background-color: #fef08a;
            color: #854d0e;
        }
        
        .challenge-badge.hard {
            background-color: #fecaca;
            color: #991b1b;
        }
        
        .challenge-badge.points {
            background-color: #dbeafe;
            color: #1e40af;
        }
        /* Estilos para el botón de tarea completada */
        
        .complete-task-btn {
            transition: all 0.3s ease;
            font-weight: 600;
        }
        
        .complete-task-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .challenge-card.completed .challenge-status {
            color: var(--primary-color);
            font-weight: 600;
        }
        
        .challenge-card.completed .file-upload {
            display: none;
        }
        
        .challenge-card.completed {
            border-left: 4px solid var(--primary-color);
            background-color: #f0fdf4;
        }
        
        .challenge-card.completed .complete-task-btn {
            background-color: #dcfce7;
            color: var(--primary-color);
            cursor: default;
        }
        
        .challenge-card.completed .complete-task-btn:hover {
            transform: none;
            box-shadow: none;
        }
        /* Estilos para animaciones de notificaciones y confeti */
        
        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        @keyframes slideOut {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(100%);
                opacity: 0;
            }
        }
        
        @keyframes confeti {
            0% {
                transform: translateY(0) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }
        
        .challenge-card.loading {
            position: relative;
        }
        
        .challenge-card.loading::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(255, 255, 255, 0.7);
            border-radius: var(--border-radius);
            z-index: 1;
        }
        
        .challenge-card.loading .complete-task-btn {
            position: relative;
            z-index: 2;
        }
        /* Estilos para mensaje de evidencia */
        
        .evidence-message {
            background-color: #f0fdf4;
            border-radius: var(--border-radius);
            padding: 0.5rem;
            margin-bottom: 1rem;
            border-left: 3px solid var(--primary-color);
        }
        /* Estilos para créditos complementarios */
        
        .credit-section {
            margin-top: 2rem;
            border-top: 1px solid #e5e7eb;
            padding-top: 2rem;
        }
        
        .section-description {
            color: #64748b;
            margin-bottom: 1.5rem;
        }
        
        .credit-options {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1.5rem;
        }
        
        .credit-card {
            background-color: #f8fafc;
            border-radius: var(--border-radius);
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            transition: var(--transition);
        }
        
        .credit-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        .credit-icon {
            background-color: var(--primary-color);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            margin-bottom: 1rem;
        }
        
        .credit-info {
            flex: 1;
        }
        
        .credit-info h4 {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--text-color);
        }
        
        .credit-info p {
            font-size: 0.9rem;
            color: #64748b;
            margin-bottom: 1rem;
        }
        
        .credit-action {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: auto;
        }
        
        .credit-cost {
            font-weight: 600;
            color: #4b5563;
        }
        
        .btn-credit {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 2rem;
            font-size: 0.9rem;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .btn-credit:hover {
            background-color: var(--primary-dark);
        }
        
        .btn-credit:disabled {
            background-color: #e5e7eb;
            color: #9ca3af;
            cursor: not-allowed;
        }
        /* Estilos para cabeceras de sección */
        
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }
        
        .coupon-filter {
            display: flex;
            align-items: center;
        }
        
        .coupon-filter select {
            padding: 0.5rem;
            border-radius: var(--border-radius);
            border: 1px solid #e5e7eb;
            background-color: white;
            font-size: 0.9rem;
        }
        
        .total-credits {
            background-color: #f0fdf4;
            color: var(--primary-color);
            font-weight: 600;
            padding: 0.5rem 1rem;
            border-radius: 2rem;
            font-size: 0.9rem;
        }
        /* Ajustes responsivos */
        
        @media (max-width: 768px) {
            .credit-options {
                grid-template-columns: 1fr;
            }
            .section-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.5rem;
            }
        }
        /* Estilos para sección de videos educativos */
        
        .videos-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 1.5rem;
        }
        
        .video-card {
            background-color: var(--card-bg);
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            transition: var(--transition);
        }
        
        .video-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1);
        }
        
        .video-thumbnail {
            position: relative;
            width: 100%;
            height: 180px;
            overflow: hidden;
        }
        
        .video-thumbnail img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }
        
        .video-card:hover .video-thumbnail img {
            transform: scale(1.05);
        }
        
        .video-play-button {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 60px;
            height: 60px;
            background-color: rgba(0, 0, 0, 0.6);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .video-play-button i {
            color: white;
            font-size: 1.8rem;
            margin-left: 5px;
            /* Ajuste para el ícono de play */
        }
        
        .video-card:hover .video-play-button {
            background-color: rgba(34, 197, 94, 0.8);
            transform: translate(-50%, -50%) scale(1.1);
        }
        
        .video-info {
            padding: 1.2rem;
        }
        
        .video-title {
            font-weight: 600;
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
            color: var(--text-color);
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            height: 2.8em;
        }
        
        .video-description {
            color: #64748b;
            font-size: 0.9rem;
            margin-bottom: 0.8rem;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
            height: 4.2em;
        }
        
        .video-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.8rem;
            color: #94a3b8;
        }
        
        .video-duration {
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }
        
        .video-category {
            background-color: #f1f5f9;
            padding: 0.2rem 0.6rem;
            border-radius: 2rem;
            font-weight: 500;
        }
        
        .video-category.reciclaje {
            background-color: #dcfce7;
            color: #166534;
        }
        
        .video-category.agua {
            background-color: #dbeafe;
            color: #1e40af;
        }
        
        .video-category.energia {
            background-color: #fef9c3;
            color: #854d0e;
        }
        
        .video-category.biodiversidad {
            background-color: #fde68a;
            color: #92400e;
        }
        
        .video-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.85);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            padding: 1rem;
        }
        
        .video-modal-content {
            position: relative;
            width: 100%;
            max-width: 900px;
            background-color: var(--card-bg);
            border-radius: var(--border-radius);
            overflow: hidden;
        }
        
        .video-modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 1.5rem;
            border-bottom: 1px solid #e5e7eb;
        }
        
        .video-modal-title {
            font-weight: 600;
            font-size: 1.2rem;
            color: var(--text-color);
        }
        
        .video-modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            color: #64748b;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .video-modal-close:hover {
            color: var(--danger-color);
        }
        
        .video-modal-body {
            padding-top: 56.25%;
            /* Proporción 16:9 */
            position: relative;
        }
        
        .video-iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
        }
        
        .video-modal-footer {
            padding: 1rem 1.5rem;
            border-top: 1px solid #e5e7eb;
        }
        
        .video-description-full {
            color: var(--text-color);
            font-size: 0.95rem;
            line-height: 1.5;
        }
        
        .video-filters {
            display: flex;
            gap: 0.8rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }
        
        .video-filter {
            padding: 0.5rem 1rem;
            border-radius: 2rem;
            background-color: #f1f5f9;
            color: #64748b;
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            border: none;
        }
        
        .video-filter:hover,
        .video-filter.active {
            background-color: var(--primary-color);
            color: white;
        }
        
        @media (max-width: 768px) {
            .videos-grid {
                grid-template-columns: 1fr;
            }
            .video-modal-content {
                width: 95%;
                max-height: 90vh;
                overflow-y: auto;
            }
            .video-filters {
                justify-content: center;
            }
        }
        
        .app-description h2 {
            color: var(--primary-color);
            margin-bottom: 1.5rem;
        }
        /* Estilos para la sección de estadísticas */
        
        .stats-section {
            margin: 3rem 0;
            padding: 2rem;
            background-color: #f1f5f9;
            border-radius: var(--border-radius);
            text-align: center;
        }
        
        .stats-section h3 {
            color: var(--text-color);
            margin-bottom: 1rem;
            font-size: 1.5rem;
        }
        
        .stats-intro {
            color: #64748b;
            max-width: 700px;
            margin: 0 auto 2rem auto;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }
        
        .stat-box {
            background-color: white;
            border-radius: var(--border-radius);
            padding: 1.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            transition: var(--transition);
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .stat-box:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1);
        }
        
        .stat-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1rem;
        }
        
        .stat-icon i {
            font-size: 1.8rem;
            color: white;
        }
        
        .stat-number {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--text-color);
            line-height: 1.2;
            margin-bottom: 0.2rem;
        }
        
        .stat-unit {
            font-size: 1rem;
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 0.8rem;
        }
        
        .stat-description {
            font-size: 0.9rem;
            color: #64748b;
            line-height: 1.4;
        }
        
        .stats-source {
            font-size: 0.8rem;
            color: #94a3b8;
            font-style: italic;
        }
        /* Colores específicos para cada estadística */
        
        .stat-box:nth-child(1) .stat-icon {
            background: linear-gradient(135deg, #10b981, #059669);
        }
        
        .stat-box:nth-child(2) .stat-icon {
            background: linear-gradient(135deg, #6366f1, #4f46e5);
        }
        
        .stat-box:nth-child(3) .stat-icon {
            background: linear-gradient(135deg, #0ea5e9, #0284c7);
        }
        
        .stat-box:nth-child(4) .stat-icon {
            background: linear-gradient(135deg, #f97316, #ea580c);
        }
        /* Animación para los números */
        
        @keyframes countUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .stat-number {
            animation: countUp 1.5s ease-out forwards;
        }
        
        @media (max-width: 768px) {
            .stats-section {
                padding: 1.5rem 1rem;
                margin: 2rem 0;
            }
            .stats-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
            .stat-box {
                padding: 1.2rem;
            }
            .stat-number {
                font-size: 2rem;
            }
        }
        
        .app-features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
            width: 100%;
            justify-content: center;
            text-align: center;
        }
        
        .feature-item {
            text-align: center;
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .feature-icon {
            font-size: 2.5rem;
            color: var(--primary-color);
            margin-bottom: 1rem;
        }
        
        .start-button {
            display: inline-block;
            background: var(--primary-color);
            color: white;
            padding: 1rem 2rem;
            border-radius: 2rem;
            text-decoration: none;
            margin-top: 2rem;
            transition: var(--transition);
        }
        
        .start-button:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }
        
        @media (max-width: 768px) {
            .carousel-item img {
                height: 350px;
            }
            .carousel-caption h2 {
                font-size: 1.4rem;
            }
            .carousel-caption p {
                font-size: 0.95rem;
            }
            .app-features {
                grid-template-columns: 1fr;
                max-width: 100%;
            }
        }
        /* Estilos para patrocinadores */
        
        .sponsors-section {
            margin-top: 3rem;
            padding: 2rem;
            background-color: #f8fafc;
            border-radius: var(--border-radius);
        }
        
        .sponsors-intro {
            color: #64748b;
            margin-bottom: 1.5rem;
        }
        
        .sponsors-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 2rem;
        }
        
        .sponsor-item {
            background-color: white;
            border-radius: var(--border-radius);
            padding: 1.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            transition: var(--transition);
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .sponsor-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1);
        }
        
        .sponsor-logo {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background-color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1rem;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .sponsor-info {
            text-align: center;
        }
        
        .sponsor-name {
            font-weight: 600;
            margin-bottom: 0.5rem;
        }
        
        .sponsor-description {
            font-size: 0.9rem;
            color: #64748b;
        }
        
        .sponsor-level {
            display: inline-block;
            font-size: 0.8rem;
            font-weight: 600;
            padding: 0.3rem 0.8rem;
            border-radius: 2rem;
            margin-top: 0.8rem;
        }
        
        .sponsor-level.platinum {
            background-color: #e5e7eb;
            color: #4b5563;
            background-image: linear-gradient(45deg, #d1d5db 25%, #e5e7eb 25%, #e5e7eb 50%, #d1d5db 50%, #d1d5db 75%, #e5e7eb 75%, #e5e7eb 100%);
            background-size: 10px 10px;
        }
        
        .sponsor-level.gold {
            background-color: #fef3c7;
            color: #92400e;
        }
        
        .sponsor-level.silver {
            background-color: #f1f5f9;
            color: #475569;
        }
        
        .sponsor-level.bronze {
            background-color: #fef3c7;
            color: #92400e;
            opacity: 0.8;
        }
        
        .sponsor-logo img {
            max-width: 80%;
            max-height: 80%;
            object-fit: contain;
        }
        
        .become-sponsor {
            text-align: center;
            margin-top: 2rem;
            padding-top: 1.5rem;
            border-top: 1px solid #e5e7eb;
        }
        
        .become-sponsor p {
            margin-bottom: 1rem;
            font-weight: 500;
        }

        .sponsor-button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: var(--border-radius);
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.95rem;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .sponsor-button:hover {
            background-color: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        @media (max-width: 768px) {
            .sponsors-grid {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
                gap: 1rem;
            }
            .sponsor-logo {
                width: 80px;
                height: 80px;
            }
            .sponsor-item {
                padding: 1rem;
            }
        }
        
        /* Estilos para el mensaje de bienvenida */
        .welcome-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 9999;
            display: flex;
            justify-content: center;
            align-items: center;
            animation: fadeIn 0.5s ease;
        }
        
        .welcome-message {
            background: linear-gradient(135deg, #ffffff, #f8fafc);
            border-radius: var(--border-radius);
            padding: 2rem;
            max-width: 500px;
            width: 90%;
            text-align: center;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            position: relative;
            animation: scaleIn 0.5s ease;
        }
        
        .welcome-icon {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1.5rem auto;
            box-shadow: 0 5px 15px rgba(34, 197, 94, 0.3);
        }
        
        .welcome-icon i {
            font-size: 2.5rem;
            color: white;
        }
        
        .welcome-title {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--text-color);
            margin-bottom: 1rem;
        }
        
        .welcome-text {
            color: #64748b;
            margin-bottom: 1.5rem;
            line-height: 1.6;
        }
        
        .welcome-button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 0.75rem 2rem;
            border-radius: 2rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            font-size: 1rem;
        }
        
        .welcome-button:hover {
            background-color: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        @keyframes scaleIn {
            from {
                transform: scale(0.9);
                opacity: 0;
            }
            to {
                transform: scale(1);
                opacity: 1;
            }
        }
        
        @keyframes fadeOut {
            from {
                opacity: 1;
            }
            to {
                opacity: 0;
            }
        }
        
        @media (max-width: 768px) {
            .welcome-message {
                padding: 1.5rem;
            }
            .welcome-icon {
                width: 60px;
                height: 60px;
            }
            .welcome-icon i {
                font-size: 2rem;
            }
            .welcome-title {
                font-size: 1.5rem;
            }
        }

        .patrocinador-card {
            position: relative;
            cursor: pointer;
            padding: 15px;
            border-radius: 8px;
            transition: all 0.3s ease;
            text-align: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .patrocinador-card:hover {
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            transform: translateY(-5px);
        }
        
        .patrocinador-info {
            display: none;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255,255,255,0.95);
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            flex-direction: column;
            justify-content: center;
        }
        
        /* Estilos para notificaciones */
        .notificacion {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 5px;
            color: white;
            font-weight: 500;
            z-index: 9999;
            opacity: 0;
            transform: translateY(-20px);
            transition: opacity 0.3s, transform 0.3s;
            box-shadow: 0 3px 6px rgba(0,0,0,0.16);
        }
        
        .notificacion.show {
            opacity: 1;
            transform: translateY(0);
        }
        
        .notificacion.success {
            background-color: #4CAF50;
        }
        
        .notificacion.error {
            background-color: #F44336;
        }
        
        .notificacion.info {
            background-color: #2196F3;
        }
    </style>
</head>

<body>
    <header>
        <div class="header-content">
            <a href="javascript:void(0);" onclick="volverInicio()" class="logo-link">
                <div class="logo">
                    <div class="logo-icon">
                        <i class="fas fa-leaf"></i>
                    </div>
                    <span class="logo-text">Econnect</span>
                </div>
            </a>
            <!-- Navegación para usuarios no autenticados -->
            <nav class="nav-buttons" id="auth-nav">
                <button class="btn btn-secondary" onclick="mostrarFormularioLogin()">
                    <i class="fas fa-sign-in-alt"></i>
                    <span class="btn-text">Iniciar Sesión</span>
                </button>
                <button class="btn btn-primary" onclick="mostrarFormularioRegistro()">
                    <i class="fas fa-user-plus"></i>
                    <span class="btn-text">Registrarse</span>
                </button>
            </nav>
            <!-- Navegación para usuarios autenticados -->
            <nav class="nav-buttons desktop-nav" id="main-nav" style="display: none;">
                <button class="btn btn-primary" onclick="mostrarSeccion('progreso')">
                    <i class="fas fa-chart-line"></i>
                    <span>Progreso</span>
                </button>
                <button class="btn btn-primary" onclick="mostrarSeccion('desafios')">
                    <i class="fas fa-tasks"></i>
                    <span>Desafíos</span>
                </button>
                <button class="btn btn-primary" onclick="mostrarSeccion('recompensas')">
                    <i class="fas fa-trophy"></i>
                    <span>Recompensas</span>
                </button>
                <button class="btn btn-primary" onclick="mostrarSeccion('videos')">
                    <i class="fas fa-play-circle"></i>
                    <span>Videos</span>
                </button>
                <button class="btn btn-secondary btn-icon" id="perfilBtn" onclick="verPerfil()">
                    <i class="fas fa-user"></i>
                </button>
                <button class="btn btn-danger btn-icon" id="cerrarBtn" onclick="cerrarSesion()">
                    <i class="fas fa-sign-out-alt"></i>
                </button>
            </nav>
        </div>
    </header>

    <!-- Barra de navegación inferior para móviles -->
    <nav class="mobile-nav" id="mobile-nav" style="display: none;">
        <button class="nav-item" onclick="mostrarSeccion('progreso')">
            <i class="fas fa-chart-line"></i>
            <span>Progreso</span>
        </button>
        <button class="nav-item" onclick="mostrarSeccion('desafios')">
            <i class="fas fa-tasks"></i>
            <span>Desafíos</span>
        </button>
        <button class="nav-item" onclick="mostrarSeccion('recompensas')">
            <i class="fas fa-trophy"></i>
            <span>Recompensas</span>
        </button>
        <button class="nav-item" onclick="mostrarSeccion('videos')">
            <i class="fas fa-play-circle"></i>
            <span>Videos</span>
        </button>
    </nav>

    <div class="container">
        <div class="intro-section">
            <div class="carousel">
                <div class="carousel-inner">
                    <div class="carousel-item">
                        <img src="https://images.unsplash.com/photo-1532996122724-e3c354a0b15b?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1600&q=80" alt="Reciclaje">
                        <div class="carousel-caption">
                            <h2>Reciclaje Transformador</h2>
                            <p>El reciclaje no es solo separar residuos, es transformar hábitos de consumo y reducir nuestra huella ecológica global. En Econnect, incentivamos prácticas sostenibles con impacto medible.</p>
                        </div>
                    </div>
                    <div class="carousel-item">
                        <img src="https://images.unsplash.com/photo-1559825481-12a05cc00344?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1600&q=80" alt="Conservación del agua">
                        <div class="carousel-caption">
                            <h2>Protección del Agua</h2>
                            <p>El agua es el recurso más valioso del planeta. Nuestros programas de conservación incluyen sistemas de monitoreo, reducción de consumo y protección de cuencas hidrográficas.</p>
                        </div>
                    </div>
                    <div class="carousel-item">
                        <img src="https://images.unsplash.com/photo-1523712999610-f77fbcfc3843?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1600&q=80" alt="Energías renovables">
                        <div class="carousel-caption">
                            <h2>Energía Sostenible</h2>
                            <p>La transición energética es clave para combatir el cambio climático. Apoyamos iniciativas de energía solar, eólica y alternativas que reducen emisiones de carbono en comunidades locales.</p>
                        </div>
                    </div>
                    <div class="carousel-item">
                        <img src="https://images.unsplash.com/photo-1511884642898-4c92249e20b6?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1600&q=80" alt="Biodiversidad">
                        <div class="carousel-caption">
                            <h2>Protección de Ecosistemas</h2>
                            <p>La biodiversidad es fundamental para la resiliencia del planeta. Nuestros proyectos de conservación ayudan a preservar hábitats críticos y especies en peligro de extinción.</p>
                        </div>
                    </div>
                </div>
                <div class="carousel-controls">
                    <button class="carousel-control" onclick="moverCarrusel(-1)">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <button class="carousel-control" onclick="moverCarrusel(1)">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
                <div class="carousel-indicators">
                    <span class="indicator active" onclick="irASlide(0)"></span>
                    <span class="indicator" onclick="irASlide(1)"></span>
                    <span class="indicator" onclick="irASlide(2)"></span>
                    <span class="indicator" onclick="irASlide(3)"></span>
                </div>
            </div>

            <div class="app-description">
                <h2>Bienvenido a Econnect</h2>
                <p>Econnect es una plataforma innovadora diseñada para inspirar y recompensar acciones positivas hacia el medio ambiente. Nuestra misión es conectar a personas comprometidas con la sostenibilidad y crear un impacto real en nuestro planeta.</p>

                <!-- Nueva sección de estadísticas de contaminación -->
                <div class="stats-section">
                    <h3>Estadísticas Globales de Contaminación</h3>
                    <p class="stats-intro">La contaminación ambiental es uno de los mayores desafíos que enfrenta nuestro planeta. Estas cifras nos muestran la urgencia de actuar.</p>

                    <div class="stats-grid">
                        <div class="stat-box">
                            <div class="stat-icon">
                                <i class="fas fa-trash"></i>
                            </div>
                            <div class="stat-number" id="plasticStat">8.3</div>
                            <div class="stat-unit">mil millones de toneladas</div>
                            <div class="stat-description">de plástico producido desde 1950, del cual solo el 9% ha sido reciclado</div>
                        </div>

                        <div class="stat-box">
                            <div class="stat-icon">
                                <i class="fas fa-smog"></i>
                            </div>
                            <div class="stat-number" id="airStat">7</div>
                            <div class="stat-unit">millones de personas</div>
                            <div class="stat-description">mueren anualmente por enfermedades relacionadas con la contaminación del aire</div>
                        </div>

                        <div class="stat-box">
                            <div class="stat-icon">
                                <i class="fas fa-water"></i>
                            </div>
                            <div class="stat-number" id="waterStat">80%</div>
                            <div class="stat-unit">de aguas residuales</div>
                            <div class="stat-description">se vierten sin tratar en ríos, lagos y océanos a nivel mundial</div>
                        </div>

                        <div class="stat-box">
                            <div class="stat-icon">
                                <i class="fas fa-temperature-high"></i>
                            </div>
                            <div class="stat-number" id="co2Stat">36.8</div>
                            <div class="stat-unit">mil millones de toneladas</div>
                            <div class="stat-description">de CO₂ emitidas anualmente por actividades humanas</div>
                        </div>
                    </div>

                    <div class="stats-source">Fuente: ONU Medio Ambiente, OMS, Global Carbon Project (2023)</div>
                </div>

                <div class="app-features">
                    <div class="feature-item">
                        <div class="feature-icon">
                            <i class="fas fa-leaf"></i>
                        </div>
                        <h3>Desafíos Verdes</h3>
                        <p>Participa en desafíos ecológicos y gana puntos mientras ayudas al planeta.</p>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">
                            <i class="fas fa-award"></i>
                        </div>
                        <h3>Recompensas</h3>
                        <p>Obtén insignias y cupones de descuento por tus acciones ambientales.</p>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <h3>Comunidad</h3>
                        <p>Únete a una comunidad de personas comprometidas con el medio ambiente.</p>
                    </div>
                </div>

                <!-- Nueva sección de patrocinadores -->
                <div class="sponsors-section">
                    <h3 class="section-title">Nuestros Patrocinadores</h3>
                    <p class="sponsors-intro">Estas empresas apoyan nuestros esfuerzos para crear un futuro más sostenible.</p>
                    <div class="sponsors-grid">
                        <!-- Patrocinador 1: Lego -->
                        <div class="sponsor-item">
                            <div class="sponsor-logo">
                                <img src="https://upload.wikimedia.org/wikipedia/commons/2/24/LEGO_logo.svg" alt="Lego">
                            </div>
                            <div class="sponsor-info">
                                <h4>Lego</h4>
                                <p>Comprometidos con la sostenibilidad y la creación de juguetes ecológicos para las futuras generaciones.</p>
                                <span class="sponsor-level platinum">Patrocinador Platino</span>
                            </div>
                        </div>

                        <!-- Patrocinador 2: Adidas -->
                        <div class="sponsor-item">
                            <div class="sponsor-logo">
                                <img src="https://upload.wikimedia.org/wikipedia/commons/2/20/Adidas_Logo.svg" alt="Adidas">
                            </div>
                            <div class="sponsor-info">
                                <h4>Adidas</h4>
                                <p>Innovando en materiales reciclados y prácticas sostenibles en la industria de la moda deportiva.</p>
                                <span class="sponsor-level gold">Patrocinador Oro</span>
                            </div>
                        </div>

                        <!-- Patrocinador 3: Microsoft -->
                        <div class="sponsor-item">
                            <div class="sponsor-logo">
                                <img src="https://upload.wikimedia.org/wikipedia/commons/4/44/Microsoft_logo.svg" alt="Microsoft">
                            </div>
                            <div class="sponsor-info">
                                <h4>Microsoft</h4>
                                <p>Liderando iniciativas de tecnología verde y comprometidos con la neutralidad de carbono.</p>
                                <span class="sponsor-level gold">Patrocinador Oro</span>
                            </div>
                        </div>
                    </div>
                </div>

                <button class="start-button" onclick="mostrarFormularioRegistro()">
                    Comienza tu viaje verde
                </button>
            </div>
        </div>

        <!-- Formulario de registro -->
        <main id="registro" class="auth-container">
            <h2 class="card-title">Crear Usuario</h2>
            <div class="form-group">
                <label for="correo">Correo Electrónico</label>
                <input type="email" id="correo" placeholder="tu@email.com" required>
            </div>
            <div class="form-group">
                <label for="nombre">Nombre</label>
                <input type="text" id="nombre" placeholder="Tu nombre completo" required>
            </div>
            <div class="form-group">
                <label for="clave">Contraseña</label>
                <input type="password" id="clave" placeholder="••••••••" required>
            </div>
            <button class="btn btn-primary" onclick="crearUsuario()">
                <i class="fas fa-user-plus"></i>
                Crear Usuario
            </button>
            <p class="login-register-toggle" onclick="mostrarFormularioLogin()">
                ¿Ya tienes cuenta? <span style="color: var(--primary-color); cursor: pointer;">Inicia sesión</span>
            </p>
        </main>

        <!-- Formulario de inicio de sesión -->
        <main id="login" class="auth-container">
            <h2 class="card-title">Iniciar Sesión</h2>
            <div class="form-group">
                <label for="correoLogin">Correo Electrónico</label>
                <input type="email" id="correoLogin" placeholder="tu@email.com" required>
            </div>
            <div class="form-group">
                <label for="claveLogin">Contraseña</label>
                <input type="password" id="claveLogin" placeholder="••••••••" required>
            </div>
            <button class="btn btn-primary" onclick="iniciarSesion()">
                <i class="fas fa-sign-in-alt"></i>
                Iniciar Sesión
            </button>
            <p class="login-register-toggle" onclick="mostrarFormularioRegistro()">
                ¿No tienes cuenta? <span style="color: var(--primary-color); cursor: pointer;">Regístrate</span>
            </p>
        </main>

        <!-- Dashboard principal modificado -->
        <main id="app">
            <div id="progreso" class="dashboard-section">
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Tu Progreso</h2>
                        <span class="badge" id="nivel-badge">Nivel 1</span>
                    </div>
                    <div class="progress-container">
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 45%"></div>
                        </div>
                        <p style="text-align: right; font-size: 0.875rem; color: #64748b;">45/100 puntos</p>
                    </div>
                    <div style="display: flex; justify-content: space-around; margin-top: 1rem;">
                        <div style="text-align: center">
                            <i class="fas fa-trophy" style="color: #fbbf24; font-size: 2rem;"></i>
                            <p style="font-size: 0.875rem; margin-top: 0.5rem;">3 Logros</p>
                        </div>
                        <div style="text-align: center">
                            <i class="fas fa-medal" style="color: #60a5fa; font-size: 2rem;"></i>
                            <p style="font-size: 0.875rem; margin-top: 0.5rem;">5 Insignias</p>
                        </div>
                        <div style="text-align: center">
                            <i class="fas fa-star" style="color: #f59e0b; font-size: 2rem;"></i>
                            <p style="font-size: 0.875rem; margin-top: 0.5rem;">2 Premios</p>
                        </div>
                    </div>
                </div>
            </div>

            <div id="desafios" class="dashboard-section">
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Desafíos Activos</h2>
                        <div class="challenge-filter">
                            <select id="filter-challenge" onchange="filtrarDesafios()">
                                <option value="todos">Todos los desafíos</option>
                                <option value="facil">Dificultad: Fácil</option>
                                <option value="medio">Dificultad: Medio</option>
                                <option value="dificil">Dificultad: Difícil</option>
                            </select>
                        </div>
                    </div>
                    <div class="challenges-grid">
                        <div class="challenge-card" data-difficulty="facil">
                            <div class="challenge-header">
                                <h3 class="challenge-title">Reciclar Plástico</h3>
                                <span class="challenge-status">25/50 kg</span>
                            </div>
                            <div class="challenge-badges">
                                <span class="challenge-badge easy">Fácil</span>
                                <span class="challenge-badge points">50 puntos</span>
                            </div>
                            <p style="margin-bottom: 1rem; color: #64748b;">Reúne una cantidad mínima de plástico reciclable.</p>
                            <div class="file-upload">
                                <label class="file-upload-label" for="evidence1">
                                    <i class="fas fa-cloud-upload-alt"></i>
                                    Subir Evidencia
                                </label>
                                <input type="file" id="evidence1" onchange="subirEvidencia(1)">
                            </div>
                            <button class="btn btn-primary complete-task-btn" id="completeTask1" style="display: none; margin-top: 1rem; width: 100%;" onclick="completarDesafio(1)">
                                <i class="fas fa-check-circle"></i> Marcar como Completado
                            </button>
                        </div>

                        <div class="challenge-card" data-difficulty="medio">
                            <div class="challenge-header">
                                <h3 class="challenge-title">Plantar un Árbol</h3>
                                <span class="challenge-status">0/1</span>
                            </div>
                            <div class="challenge-badges">
                                <span class="challenge-badge medium">Medio</span>
                                <span class="challenge-badge points">100 puntos</span>
                            </div>
                            <p style="margin-bottom: 1rem; color: #64748b;">Planta un árbol en tu comunidad y sube la evidencia.</p>
                            <div class="file-upload">
                                <label class="file-upload-label" for="evidence2">
                                    <i class="fas fa-cloud-upload-alt"></i>
                                    Subir Evidencia
                                </label>
                                <input type="file" id="evidence2" onchange="subirEvidencia(2)">
                            </div>
                            <button class="btn btn-primary complete-task-btn" id="completeTask2" style="display: none; margin-top: 1rem; width: 100%;" onclick="completarDesafio(2)">
                                <i class="fas fa-check-circle"></i> Marcar como Completado
                            </button>
                        </div>

                        <div class="challenge-card" data-difficulty="facil">
                            <div class="challenge-header">
                                <h3 class="challenge-title">Uso de Transporte Sostenible</h3>
                                <span class="challenge-status">3/7 días</span>
                            </div>
                            <div class="challenge-badges">
                                <span class="challenge-badge easy">Fácil</span>
                                <span class="challenge-badge points">75 puntos</span>
                            </div>
                            <p style="margin-bottom: 1rem; color: #64748b;">Usa transporte público, bicicleta o camina durante una semana.</p>
                            <div class="file-upload">
                                <label class="file-upload-label" for="evidence3">
                                    <i class="fas fa-cloud-upload-alt"></i>
                                    Subir Evidencia
                                </label>
                                <input type="file" id="evidence3" onchange="subirEvidencia(3)">
                            </div>
                            <button class="btn btn-primary complete-task-btn" id="completeTask3" style="display: none; margin-top: 1rem; width: 100%;" onclick="completarDesafio(3)">
                                <i class="fas fa-check-circle"></i> Marcar como Completado
                            </button>
                        </div>

                        <div class="challenge-card" data-difficulty="dificil">
                            <div class="challenge-header">
                                <h3 class="challenge-title">Jardín Comunitario</h3>
                                <span class="challenge-status">0/1</span>
                            </div>
                            <div class="challenge-badges">
                                <span class="challenge-badge hard">Difícil</span>
                                <span class="challenge-badge points">200 puntos</span>
                            </div>
                            <p style="margin-bottom: 1rem; color: #64748b;">Crea o participa en un jardín comunitario en tu vecindario.</p>
                            <div class="file-upload">
                                <label class="file-upload-label" for="evidence4">
                                    <i class="fas fa-cloud-upload-alt"></i>
                                    Subir Evidencia
                                </label>
                                <input type="file" id="evidence4" onchange="subirEvidencia(4)">
                            </div>
                            <button class="btn btn-primary complete-task-btn" id="completeTask4" style="display: none; margin-top: 1rem; width: 100%;" onclick="completarDesafio(4)">
                                <i class="fas fa-check-circle"></i> Marcar como Completado
                            </button>
                        </div>

                        <div class="challenge-card" data-difficulty="medio">
                            <div class="challenge-header">
                                <h3 class="challenge-title">Reducción de Consumo de Agua</h3>
                                <span class="challenge-status">15/30 días</span>
                            </div>
                            <div class="challenge-badges">
                                <span class="challenge-badge medium">Medio</span>
                                <span class="challenge-badge points">150 puntos</span>
                            </div>
                            <p style="margin-bottom: 1rem; color: #64748b;">Reduce tu consumo de agua en un 20% durante un mes.</p>
                            <div class="file-upload">
                                <label class="file-upload-label" for="evidence5">
                                    <i class="fas fa-cloud-upload-alt"></i>
                                    Subir Evidencia
                                </label>
                                <input type="file" id="evidence5" onchange="subirEvidencia(5)">
                            </div>
                            <button class="btn btn-primary complete-task-btn" id="completeTask5" style="display: none; margin-top: 1rem; width: 100%;" onclick="completarDesafio(5)">
                                <i class="fas fa-check-circle"></i> Marcar como Completado
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div id="recompensas" class="dashboard-section">
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Recompensas</h2>
                        <span class="total-credits">Créditos disponibles: <span id="user-credits">350</span></span>
                    </div>
                    <div class="rewards-list">
                        <div class="reward-item">
                            <i class="fas fa-award reward-icon"></i>
                            <div class="reward-info">
                                <h4 class="reward-title">Insignia de Bronce</h4>
                                <p class="reward-description">Completa 3 desafíos</p>
                            </div>
                        </div>
                        <div class="reward-item">
                            <i class="fas fa-medal reward-icon"></i>
                            <div class="reward-info">
                                <h4 class="reward-title">Insignia de Plata</h4>
                                <p class="reward-description">Planta 10 árboles</p>
                            </div>
                        </div>
                        <div class="reward-item">
                            <i class="fas fa-crown reward-icon"></i>
                            <div class="reward-info">
                                <h4 class="reward-title">Insignia de Oro</h4>
                                <p class="reward-description">Alcanza 1000 puntos</p>
                            </div>
                        </div>
                    </div>

                    <!-- Sección de Cupones -->
                    <div class="coupon-section">
                        <div class="section-header">
                            <h3 class="card-title">Cupones Disponibles</h3>
                            <div class="coupon-filter">
                                <select id="filter-coupon" onchange="filtrarCupones()">
                                    <option value="todos">Todos los cupones</option>
                                    <option value="menor">Precio: Menor a mayor</option>
                                    <option value="mayor">Precio: Mayor a menor</option>
                                    <option value="fecha">Fecha: Próximos a expirar</option>
                                    <option value="tiendas">Por tienda</option>
                                </select>
                            </div>
                        </div>
                        <div id="tiendas-filter" style="display: none; margin-bottom: 1rem;">
                            <div style="display: flex; flex-wrap: wrap; gap: 0.5rem;">
                                <button class="btn btn-sm" onclick="filtrarPorTienda('todas')" style="padding: 0.3rem 0.8rem; font-size: 0.8rem; background-color: var(--primary-color); color: white;">Todas</button>
                                <button class="btn btn-sm" onclick="filtrarPorTienda('H&M')" style="padding: 0.3rem 0.8rem; font-size: 0.8rem; background-color: #d50032; color: white;">H&M</button>
                                <button class="btn btn-sm" onclick="filtrarPorTienda('Zara')" style="padding: 0.3rem 0.8rem; font-size: 0.8rem; background-color: #000000; color: white;">Zara</button>
                                <button class="btn btn-sm" onclick="filtrarPorTienda('Walmart')" style="padding: 0.3rem 0.8rem; font-size: 0.8rem; background-color: #0071ce; color: white;">Walmart</button>
                                <button class="btn btn-sm" onclick="filtrarPorTienda('Adidas')" style="padding: 0.3rem 0.8rem; font-size: 0.8rem; background-color: #000000; color: white;">Adidas</button>
                                <button class="btn btn-sm" onclick="filtrarPorTienda('Whole Foods')" style="padding: 0.3rem 0.8rem; font-size: 0.8rem; background-color: #00674e; color: white;">Whole Foods</button>
                                <button class="btn btn-sm" onclick="filtrarPorTienda('Starbucks')" style="padding: 0.3rem 0.8rem; font-size: 0.8rem; background-color: #00704a; color: white;">Starbucks</button>
                                <button class="btn btn-sm" onclick="filtrarPorTienda('The Body Shop')" style="padding: 0.3rem 0.8rem; font-size: 0.8rem; background-color: #004236; color: white;">The Body Shop</button>
                                <button class="btn btn-sm" onclick="filtrarPorTienda('Patagonia')" style="padding: 0.3rem 0.8rem; font-size: 0.8rem; background-color: #5da698; color: white;">Patagonia</button>
                            </div>
                        </div>
                        <div id="cupones-container">
                            <!-- Los cupones se cargarán dinámicamente aquí -->
                        </div>
                    </div>

                    <!-- Nueva sección de Créditos Complementarios -->
                    <div class="credit-section">
                        <h3 class="card-title">Canjear Créditos Complementarios</h3>
                        <p class="section-description">Tus créditos pueden ser canjeados por diferentes beneficios sostenibles.</p>

                        <div class="credit-options">
                            <div class="credit-card">
                                <div class="credit-icon"><i class="fas fa-tree"></i></div>
                                <div class="credit-info">
                                    <h4>Donación para Reforestación</h4>
                                    <p>Dona tus créditos para plantar árboles en zonas deforestadas.</p>
                                </div>
                                <div class="credit-action">
                                    <span class="credit-cost">100 créditos</span>
                                    <button class="btn-credit" onclick="canjearCreditos('reforestacion', 100)">Canjear</button>
                                </div>
                            </div>

                            <div class="credit-card">
                                <div class="credit-icon"><i class="fas fa-solar-panel"></i></div>
                                <div class="credit-info">
                                    <h4>Apoyo a Energía Solar</h4>
                                    <p>Contribuye a la instalación de paneles solares en escuelas rurales.</p>
                                </div>
                                <div class="credit-action">
                                    <span class="credit-cost">200 créditos</span>
                                    <button class="btn-credit" onclick="canjearCreditos('solar', 200)">Canjear</button>
                                </div>
                            </div>

                            <div class="credit-card">
                                <div class="credit-icon"><i class="fas fa-tint"></i></div>
                                <div class="credit-info">
                                    <h4>Purificación de Agua</h4>
                                    <p>Ayuda a proveer sistemas de agua potable en comunidades necesitadas.</p>
                                </div>
                                <div class="credit-action">
                                    <span class="credit-cost">150 créditos</span>
                                    <button class="btn-credit" onclick="canjearCreditos('agua', 150)">Canjear</button>
                                </div>
                            </div>

                            <div class="credit-card">
                                <div class="credit-icon"><i class="fas fa-graduation-cap"></i></div>
                                <div class="credit-info">
                                    <h4>Educación Ambiental</h4>
                                    <p>Apoya programas educativos sobre sostenibilidad para niños.</p>
                                </div>
                                <div class="credit-action">
                                    <span class="credit-cost">120 créditos</span>
                                    <button class="btn-credit" onclick="canjearCreditos('educacion', 120)">Canjear</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Sección de administración de cupones (solo visible para administradores) -->
                    <div id="admin-cupones" class="admin-section" style="display: none;">
                        <h3 class="card-title">Administrar Cupones</h3>
                        <form id="formCupon" onsubmit="agregarCupon(event)">
                            <div class="form-group">
                                <label for="cuponTitulo">Título del Cupón</label>
                                <input type="text" id="cuponTitulo" required placeholder="ej. 20% de descuento en...">
                            </div>
                            <div class="form-group">
                                <label for="cuponCodigo">Código</label>
                                <input type="text" id="cuponCodigo" required placeholder="ej. ECO2024">
                            </div>
                            <div class="form-group">
                                <label for="cuponPuntos">Puntos Requeridos</label>
                                <input type="number" id="cuponPuntos" required min="0">
                            </div>
                            <div class="form-group">
                                <label for="cuponTienda">Tienda</label>
                                <select id="cuponTienda" required>
                                    <option value="">Seleccionar tienda</option>
                                    <option value="H&M">H&M</option>
                                    <option value="Zara">Zara</option>
                                    <option value="Walmart">Walmart</option>
                                    <option value="Adidas">Adidas</option>
                                    <option value="Whole Foods">Whole Foods</option>
                                    <option value="Starbucks">Starbucks</option>
                                    <option value="The Body Shop">The Body Shop</option>
                                    <option value="Patagonia">Patagonia</option>
                                    <option value="Econnect">Econnect (Genérico)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="cuponExpiracion">Fecha de Expiración</label>
                                <input type="date" id="cuponExpiracion" required>
                            </div>
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-plus"></i>
                                Agregar Cupón
                            </button>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Nueva sección de Videos Educativos -->
            <div id="videos" class="dashboard-section">
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Videos Educativos</h2>
                    </div>

                    <div class="video-filters">
                        <button class="video-filter active" onclick="filtrarVideos('todos')">Todos</button>
                        <button class="video-filter" onclick="filtrarVideos('reciclaje')">Reciclaje</button>
                        <button class="video-filter" onclick="filtrarVideos('agua')">Agua</button>
                        <button class="video-filter" onclick="filtrarVideos('energia')">Energía</button>
                        <button class="video-filter" onclick="filtrarVideos('biodiversidad')">Biodiversidad</button>
                    </div>

                    <div class="videos-grid">
                        <!-- Video 1 -->
                        <div class="video-card" data-category="reciclaje">
                            <div class="video-thumbnail">
                                <img src="https://img.youtube.com/vi/FkOXW0UHxPw/maxresdefault.jpg" alt="Reciclaje Creativo">
                                <div class="video-play-button" onclick="abrirVideo('FkOXW0UHxPw', 'Cómo reciclar correctamente en casa', 'Aprende a separar correctamente los desechos, identificar materiales reciclables y crear un sistema de reciclaje efectivo en tu hogar.')">
                                    <i class="fas fa-play"></i>
                                </div>
                            </div>
                            <div class="video-info">
                                <h3 class="video-title">Cómo reciclar correctamente en casa</h3>
                                <p class="video-description">Aprende a separar correctamente los desechos, identificar materiales reciclables y crear un sistema de reciclaje efectivo en tu hogar.</p>
                                <div class="video-meta">
                                    <div class="video-duration">
                                        <i class="fas fa-clock"></i>
                                        <span>7:45</span>
                                    </div>
                                    <span class="video-category reciclaje">Reciclaje</span>
                                </div>
                            </div>
                        </div>

                        <!-- Video 2 -->
                        <div class="video-card" data-category="agua">
                            <div class="video-thumbnail">
                                <img src="https://img.youtube.com/vi/S1cAGQDIAQ4/maxresdefault.jpg" alt="Conservación del agua">
                                <div class="video-play-button" onclick="abrirVideo('S1cAGQDIAQ4', 'Consejos para ahorrar agua en el hogar', 'Descubre técnicas simples pero efectivas para reducir el consumo de agua en tu vida diaria y contribuir a la conservación de este recurso vital.')">
                                    <i class="fas fa-play"></i>
                                </div>
                            </div>
                            <div class="video-info">
                                <h3 class="video-title">Consejos para ahorrar agua en el hogar</h3>
                                <p class="video-description">Descubre técnicas simples pero efectivas para reducir el consumo de agua en tu vida diaria y contribuir a la conservación de este recurso vital.</p>
                                <div class="video-meta">
                                    <div class="video-duration">
                                        <i class="fas fa-clock"></i>
                                        <span>5:20</span>
                                    </div>
                                    <span class="video-category agua">Agua</span>
                                </div>
                            </div>
                        </div>

                        <!-- Video 3 -->
                        <div class="video-card" data-category="energia">
                            <div class="video-thumbnail">
                                <img src="https://img.youtube.com/vi/X6HDcubgxRk/maxresdefault.jpg" alt="Energías renovables">
                                <div class="video-play-button" onclick="abrirVideo('X6HDcubgxRk', 'Introducción a las energías renovables', 'Este video explica los diferentes tipos de energías renovables, cómo funcionan y por qué son fundamentales para combatir el cambio climático.')">
                                    <i class="fas fa-play"></i>
                                </div>
                            </div>
                            <div class="video-info">
                                <h3 class="video-title">Introducción a las energías renovables</h3>
                                <p class="video-description">Este video explica los diferentes tipos de energías renovables, cómo funcionan y por qué son fundamentales para combatir el cambio climático.</p>
                                <div class="video-meta">
                                    <div class="video-duration">
                                        <i class="fas fa-clock"></i>
                                        <span>8:15</span>
                                    </div>
                                    <span class="video-category energia">Energía</span>
                                </div>
                            </div>
                        </div>

                        <!-- Video 4 -->
                        <div class="video-card" data-category="reciclaje">
                            <div class="video-thumbnail">
                                <img src="https://img.youtube.com/vi/iBOxCDcMpGc/maxresdefault.jpg" alt="Upcycling">
                                <div class="video-play-button" onclick="abrirVideo('iBOxCDcMpGc', 'Upcycling: transformando residuos en tesoros', 'Aprende a reutilizar materiales de desecho para crear objetos útiles y decorativos, reduciendo la basura y dando nueva vida a lo que ibas a tirar.')">
                                    <i class="fas fa-play"></i>
                                </div>
                            </div>
                            <div class="video-info">
                                <h3 class="video-title">Upcycling: transformando residuos en tesoros</h3>
                                <p class="video-description">Aprende a reutilizar materiales de desecho para crear objetos útiles y decorativos, reduciendo la basura y dando nueva vida a lo que ibas a tirar.</p>
                                <div class="video-meta">
                                    <div class="video-duration">
                                        <i class="fas fa-clock"></i>
                                        <span>10:30</span>
                                    </div>
                                    <span class="video-category reciclaje">Reciclaje</span>
                                </div>
                            </div>
                        </div>

                        <!-- Video 5 -->
                        <div class="video-card" data-category="biodiversidad">
                            <div class="video-thumbnail">
                                <img src="https://img.youtube.com/vi/q5ngTJz8-mU/maxresdefault.jpg" alt="Biodiversidad">
                                <div class="video-play-button" onclick="abrirVideo('q5ngTJz8-mU', 'La importancia de la biodiversidad', 'Descubre por qué la biodiversidad es crucial para la salud del planeta y cómo podemos contribuir a su conservación desde nuestra vida cotidiana.')">
                                    <i class="fas fa-play"></i>
                                </div>
                            </div>
                            <div class="video-info">
                                <h3 class="video-title">La importancia de la biodiversidad</h3>
                                <p class="video-description">Descubre por qué la biodiversidad es crucial para la salud del planeta y cómo podemos contribuir a su conservación desde nuestra vida cotidiana.</p>
                                <div class="video-meta">
                                    <div class="video-duration">
                                        <i class="fas fa-clock"></i>
                                        <span>6:45</span>
                                    </div>
                                    <span class="video-category biodiversidad">Biodiversidad</span>
                                </div>
                            </div>
                        </div>

                        <!-- Video 6 -->
                        <div class="video-card" data-category="agua">
                            <div class="video-thumbnail">
                                <img src="https://img.youtube.com/vi/GcXE5-4HvmU/maxresdefault.jpg" alt="Crisis hídrica">
                                <div class="video-play-button" onclick="abrirVideo('GcXE5-4HvmU', 'La crisis hídrica global: causas y soluciones', 'Un análisis profundo sobre la escasez de agua en el planeta, sus causas y las posibles soluciones para enfrentar uno de los mayores desafíos ambientales.')">
                                    <i class="fas fa-play"></i>
                                </div>
                            </div>
                            <div class="video-info">
                                <h3 class="video-title">La crisis hídrica global: causas y soluciones</h3>
                                <p class="video-description">Un análisis profundo sobre la escasez de agua en el planeta, sus causas y las posibles soluciones para enfrentar uno de los mayores desafíos ambientales.</p>
                                <div class="video-meta">
                                    <div class="video-duration">
                                        <i class="fas fa-clock"></i>
                                        <span>12:10</span>
                                    </div>
                                    <span class="video-category agua">Agua</span>
                                </div>
                            </div>
                        </div>

                        <!-- Video 7 -->
                        <div class="video-card" data-category="energia">
                            <div class="video-thumbnail">
                                <img src="https://img.youtube.com/vi/1kUE0BZtTRc/maxresdefault.jpg" alt="Ahorro energético">
                                <div class="video-play-button" onclick="abrirVideo('1kUE0BZtTRc', 'Cómo reducir tu consumo energético diario', 'Estrategias prácticas para disminuir el consumo de energía en casa, ahorrar dinero y reducir tu huella de carbono con cambios simples en tus hábitos cotidianos.')">
                                    <i class="fas fa-play"></i>
                                </div>
                            </div>
                            <div class="video-info">
                                <h3 class="video-title">Cómo reducir tu consumo energético diario</h3>
                                <p class="video-description">Estrategias prácticas para disminuir el consumo de energía en casa, ahorrar dinero y reducir tu huella de carbono con cambios simples en tus hábitos cotidianos.</p>
                                <div class="video-meta">
                                    <div class="video-duration">
                                        <i class="fas fa-clock"></i>
                                        <span>9:25</span>
                                    </div>
                                    <span class="video-category energia">Energía</span>
                                </div>
                            </div>
                        </div>

                        <!-- Video 8 -->
                        <div class="video-card" data-category="reciclaje">
                            <div class="video-thumbnail">
                                <img src="https://img.youtube.com/vi/fwrlr7tXYQM/maxresdefault.jpg" alt="Economía circular">
                                <div class="video-play-button" onclick="abrirVideo('fwrlr7tXYQM', 'Economía circular: un nuevo modelo de producción y consumo', 'Conoce cómo la economía circular propone un sistema donde los residuos se convierten en recursos, minimizando el impacto ambiental y maximizando la eficiencia.')">
                                    <i class="fas fa-play"></i>
                                </div>
                            </div>
                            <div class="video-info">
                                <h3 class="video-title">Economía circular: un nuevo modelo de producción y consumo</h3>
                                <p class="video-description">Conoce cómo la economía circular propone un sistema donde los residuos se convierten en recursos, minimizando el impacto ambiental y maximizando la eficiencia.</p>
                                <div class="video-meta">
                                    <div class="video-duration">
                                        <i class="fas fa-clock"></i>
                                        <span>11:40</span>
                                    </div>
                                    <span class="video-category reciclaje">Reciclaje</span>
                                </div>
                            </div>
                        </div>

                        <!-- Video 9 -->
                        <div class="video-card" data-category="biodiversidad">
                            <div class="video-thumbnail">
                                <img src="https://img.youtube.com/vi/X-iJxM5v6t0/maxresdefault.jpg" alt="Especies en peligro">
                                <div class="video-play-button" onclick="abrirVideo('X-iJxM5v6t0', 'Especies en peligro de extinción: una cuenta regresiva', 'Un recorrido por las principales especies amenazadas del planeta, las causas de su disminución y las acciones de conservación más urgentes.')">
                                    <i class="fas fa-play"></i>
                                </div>
                            </div>
                            <div class="video-info">
                                <h3 class="video-title">Especies en peligro de extinción: una cuenta regresiva</h3>
                                <p class="video-description">Un recorrido por las principales especies amenazadas del planeta, las causas de su disminución y las acciones de conservación más urgentes.</p>
                                <div class="video-meta">
                                    <div class="video-duration">
                                        <i class="fas fa-clock"></i>
                                        <span>14:15</span>
                                    </div>
                                    <span class="video-category biodiversidad">Biodiversidad</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Modal para reproducir videos -->
    <div id="videoModal" class="video-modal">
        <div class="video-modal-content">
            <div class="video-modal-header">
                <h3 class="video-modal-title" id="videoTitle">Título del video</h3>
                <button class="video-modal-close" onclick="cerrarVideo()">&times;</button>
            </div>
            <div class="video-modal-body">
                <iframe id="videoIframe" class="video-iframe" src="" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            </div>
            <div class="video-modal-footer">
                <p class="video-description-full" id="videoDescription">Descripción completa del video.</p>
            </div>
        </div>
    </div>

    <!-- Modal de Perfil -->
    <div id="perfilModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Mi Perfil</h3>
                <button class="close-modal" onclick="cerrarModalPerfil()">&times;</button>
            </div>
            <div class="profile-stats">
                <div class="stat-item">
                    <div class="stat-value" id="nivel-perfil">1</div>
                    <div class="stat-label">Nivel</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="puntos-perfil">0</div>
                    <div class="stat-label">Puntos</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="insignias-perfil">0</div>
                    <div class="stat-label">Insignias</div>
                </div>
            </div>
            <form id="formPerfil" onsubmit="actualizarPerfil(event)">
                <div class="form-group">
                    <label for="perfilNombre">Nombre</label>
                    <input type="text" id="perfilNombre" required>
                </div>
                <div class="form-group">
                    <label for="perfilEmail">Correo Electrónico</label>
                    <input type="email" id="perfilEmail" required>
                </div>
                <div class="form-group">
                    <label for="perfilClave">Nueva Contraseña (dejar en blanco para mantener la actual)</label>
                    <input type="password" id="perfilClave" placeholder="••••••••">
                </div>
                <button type="submit" class="btn btn-primary">
                    <i class="fas fa-save"></i>
                    Guardar Cambios
                </button>
            </form>
        </div>
    </div>

    <!-- Mensaje de Bienvenida -->
    <div id="welcomeOverlay" class="welcome-overlay" style="display: none;">
        <div class="welcome-message">
            <div class="welcome-icon">
                <i class="fas fa-leaf"></i>
            </div>
            <h2 class="welcome-title">¡Bienvenido a Econnect!</h2>
            <p class="welcome-text">Gracias por unirte a nuestra comunidad comprometida con el medio ambiente. Juntos podemos crear un impacto positivo en nuestro planeta.</p>
            <button class="welcome-button" onclick="cerrarBienvenida()">
                Comenzar mi viaje verde
            </button>
        </div>
    </div>

    </section>

    <style>
        .patrocinador-card {
            position: relative;
            cursor: pointer;
            padding: 15px;
            border-radius: 8px;
            transition: all 0.3s ease;
            text-align: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .patrocinador-card:hover {
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            transform: translateY(-5px);
        }
        
        .patrocinador-info {
            display: none;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255,255,255,0.95);
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            flex-direction: column;
            justify-content: center;
        }
    </style>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            // Inicializar cupones predeterminados si no existen
            inicializarCuponesPredeterminados();

            const usuarioActual = localStorage.getItem("usuario_actual");
            if (usuarioActual) {
                document.querySelector('.intro-section').style.display = 'none';
                document.getElementById("auth-nav").style.display = "none";
                mostrarApp(JSON.parse(usuarioActual));
            } else {
                document.querySelector('.intro-section').style.display = 'block';
                document.getElementById("auth-nav").style.display = "flex";
                document.getElementById("registro").style.display = "none";
                document.getElementById("login").style.display = "none";
                document.getElementById("main-nav").style.display = "none";
                document.getElementById("mobile-nav").style.display = "none";

                // Mostrar mensaje de bienvenida para visitantes nuevos
                if (!localStorage.getItem("bienvenida_mostrada")) {
                    setTimeout(() => {
                        mostrarBienvenida("visitante");
                    }, 1000);
                }

                // Aplicar estilos específicos para botones en modo móvil
                if (window.innerWidth <= 768) {
                    const authNav = document.getElementById('auth-nav');
                    authNav.style.flexDirection = 'row';
                    authNav.style.justifyContent = 'flex-end';
                    authNav.style.flex = '0 0 auto';

                    // Aplicar estilos a los botones
                    const buttons = authNav.querySelectorAll('.btn');
                    buttons.forEach(btn => {
                        const text = btn.querySelector('.btn-text');
                        if (text) text.style.display = 'none';

                        btn.style.width = '40px';
                        btn.style.height = '40px';
                        btn.style.padding = '0';
                        btn.style.borderRadius = '50%';
                        btn.style.minWidth = '40px';
                    });
                }
            }

            // Iniciar el carrusel
            actualizarCarrusel();

            // Configurar intervalo para el carrusel
            setInterval(() => moverCarrusel(1), 5000);

            // Configurar animación de estadísticas
            configurarAnimacionEstadisticas();
        });

        function configurarAnimacionEstadisticas() {
            // Verificar si estamos en la página de inicio
            const statsSection = document.querySelector('.stats-section');
            if (!statsSection) return;

            // Función para verificar si un elemento está visible en la pantalla
            function isElementInViewport(el) {
                const rect = el.getBoundingClientRect();
                return (
                    rect.top >= 0 &&
                    rect.left >= 0 &&
                    rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&
                    rect.right <= (window.innerWidth || document.documentElement.clientWidth)
                );
            }

            // Función para animar contadores
            function animateCounters() {
                const statNumbers = document.querySelectorAll('.stat-number');

                if (isElementInViewport(statsSection)) {
                    statNumbers.forEach(statNumber => {
                        const id = statNumber.id;
                        let targetValue;

                        // Valores objetivo para cada estadística
                        switch (id) {
                            case 'plasticStat':
                                targetValue = 8.3;
                                break;
                            case 'airStat':
                                targetValue = 7;
                                break;
                            case 'waterStat':
                                targetValue = 80;
                                break;
                            case 'co2Stat':
                                targetValue = 36.8;
                                break;
                            default:
                                return;
                        }

                        // Si ya se ha animado, no volver a hacerlo
                        if (statNumber.dataset.animated === 'true') return;

                        // Marcar como animado
                        statNumber.dataset.animated = 'true';

                        // Animación de conteo
                        let startValue = 0;
                        const duration = 2000; // 2 segundos
                        const startTime = performance.now();

                        function updateCounter(timestamp) {
                            const elapsedTime = timestamp - startTime;
                            const progress = Math.min(elapsedTime / duration, 1);

                            // Función de easing para hacer la animación más natural
                            const easeOutQuad = t => t * (2 - t);
                            const easedProgress = easeOutQuad(progress);

                            // Calcular el valor actual
                            let currentValue = startValue + (targetValue - startValue) * easedProgress;

                            // Formatear según el tipo de estadística
                            if (id === 'waterStat') {
                                statNumber.textContent = Math.round(currentValue) + '%';
                            } else {
                                statNumber.textContent = currentValue.toFixed(1);
                            }

                            // Continuar la animación si no ha terminado
                            if (progress < 1) {
                                requestAnimationFrame(updateCounter);
                            }
                        }

                        requestAnimationFrame(updateCounter);
                    });
                }
            }

            // Verificar la visibilidad al cargar la página
            animateCounters();

            // Verificar la visibilidad al hacer scroll
            window.addEventListener('scroll', animateCounters);
        }

        function inicializarCuponesPredeterminados() {
            // Verificar si ya existen cupones
            const cupones = JSON.parse(localStorage.getItem('cupones') || '[]');

            // Si no hay cupones, crear algunos predeterminados
            if (cupones.length === 0) {
                const fechaHoy = new Date();

                // Crear fecha de expiración (3 meses después)
                const fechaExpiracion = new Date(fechaHoy);
                fechaExpiracion.setMonth(fechaExpiracion.getMonth() + 3);

                // Crear fecha de expiración más cercana (1 mes después)
                const fechaExpiracionCorta = new Date(fechaHoy);
                fechaExpiracionCorta.setMonth(fechaExpiracionCorta.getMonth() + 1);

                // Crear fecha de expiración más lejana (6 meses después)
                const fechaExpiracionLarga = new Date(fechaHoy);
                fechaExpiracionLarga.setMonth(fechaExpiracionLarga.getMonth() + 6);

                const cuponesPredeterminados = [{
                    titulo: "20% de descuento en H&M",
                    codigo: "ECO20HM",
                    puntos: 150,
                    expiracion: fechaExpiracion.toISOString().split('T')[0],
                    tienda: "H&M"
                }, {
                    titulo: "15% de descuento en Zara",
                    codigo: "ECOZARA15",
                    puntos: 120,
                    expiracion: fechaExpiracionLarga.toISOString().split('T')[0],
                    tienda: "Zara"
                }, {
                    titulo: "10% en productos ecológicos de Walmart",
                    codigo: "ECOWMT10",
                    puntos: 80,
                    expiracion: fechaExpiracionCorta.toISOString().split('T')[0],
                    tienda: "Walmart"
                }, {
                    titulo: "25% en productos sostenibles de Adidas",
                    codigo: "ECOADI25",
                    puntos: 200,
                    expiracion: fechaExpiracionLarga.toISOString().split('T')[0],
                    tienda: "Adidas"
                }, {
                    titulo: "2x1 en productos orgánicos de Whole Foods",
                    codigo: "ECOWF2X1",
                    puntos: 180,
                    expiracion: fechaExpiracion.toISOString().split('T')[0],
                    tienda: "Whole Foods"
                }, {
                    titulo: "30% en botellas reutilizables de Starbucks",
                    codigo: "ECOSBUX30",
                    puntos: 100,
                    expiracion: fechaExpiracionCorta.toISOString().split('T')[0],
                    tienda: "Starbucks"
                }, {
                    titulo: "15% en productos de The Body Shop",
                    codigo: "ECOTBS15",
                    puntos: 120,
                    expiracion: fechaExpiracion.toISOString().split('T')[0],
                    tienda: "The Body Shop"
                }, {
                    titulo: "50% en segunda prenda de Patagonia",
                    codigo: "ECOPAT50",
                    puntos: 250,
                    expiracion: fechaExpiracionLarga.toISOString().split('T')[0],
                    tienda: "Patagonia"
                }];

                localStorage.setItem('cupones', JSON.stringify(cuponesPredeterminados));
            }
        }

        function mostrarFormularioLogin() {
            document.querySelector('.intro-section').style.display = 'none';
            document.getElementById("registro").style.display = "none";
            document.getElementById("login").style.display = "block";
            document.getElementById("app").style.display = "none";
            document.getElementById("main-nav").style.display = "none";
            document.getElementById("mobile-nav").style.display = "none";
            document.getElementById("auth-nav").style.display = "flex";
        }

        function mostrarFormularioRegistro() {
            document.querySelector('.intro-section').style.display = 'none';
            document.getElementById("registro").style.display = "block";
            document.getElementById("login").style.display = "none";
            document.getElementById("app").style.display = "none";
            document.getElementById("main-nav").style.display = "none";
            document.getElementById("mobile-nav").style.display = "none";
            document.getElementById("auth-nav").style.display = "flex";
        }

        function iniciarSesion() {
            const correo = document.getElementById("correoLogin").value;
            const clave = document.getElementById("claveLogin").value;

            // Obtener la lista de usuarios
            const usuarios = JSON.parse(localStorage.getItem("usuarios") || "[]");
            const usuario = usuarios.find(u => u.email === correo && u.clave === clave);

            if (!usuario) {
                alert("Correo o contraseña incorrectos.");
                return;
            }

            // Guardar la sesión actual
            localStorage.setItem("usuario_actual", JSON.stringify(usuario));

            // Ocultar botones de auth inmediatamente en modo móvil
            if (window.innerWidth <= 768) {
                document.getElementById("auth-nav").style.display = "none";
            }

            // Mostrar mensaje de bienvenida personalizado
            mostrarBienvenida("login", usuario.nombre);
            
            // Mostrar la aplicación después de cerrar el mensaje de bienvenida
            setTimeout(() => {
                mostrarApp(usuario);
            }, 500);
        }

        function crearUsuario() {
            const email = document.getElementById("correo").value;
            const nombre = document.getElementById("nombre").value;
            const clave = document.getElementById("clave").value;

            if (!email || !nombre || !clave) {
                alert("Por favor, completa todos los campos.");
                return;
            }

            const usuario = {
                email,
                nombre,
                clave,
                puntos: 0,
                nivel: 1,
                insignias: [],
                creditos: 350 // Valor inicial de créditos
            };

            // Guardar el usuario en el almacenamiento de usuarios
            let usuarios = JSON.parse(localStorage.getItem("usuarios") || "[]");
            usuarios.push(usuario);
            localStorage.setItem("usuarios", JSON.stringify(usuarios));

            // Guardar la sesión actual
            localStorage.setItem("usuario_actual", JSON.stringify(usuario));

            // Ocultar botones de auth inmediatamente en modo móvil
            if (window.innerWidth <= 768) {
                document.getElementById("auth-nav").style.display = "none";
            }

            // Mostrar mensaje de bienvenida personalizado para nuevos usuarios
            mostrarBienvenida("registro", nombre);
            
            // Mostrar la aplicación después de cerrar el mensaje de bienvenida
            setTimeout(() => {
                mostrarApp(usuario);
            }, 500);
        }

        function mostrarApp(usuario) {
            document.querySelector('.intro-section').style.display = 'none';
            document.getElementById("registro").style.display = "none";
            document.getElementById("login").style.display = "none";
            document.getElementById("app").style.display = "block";
            document.getElementById("nivel-badge").textContent = `Nivel ${usuario.nivel}`;
            document.getElementById("auth-nav").style.display = "none";
            document.getElementById("main-nav").style.display = "flex";
            if (window.innerWidth <= 768) {
                document.getElementById("mobile-nav").style.display = "flex";
            }

            // Actualizar créditos disponibles
            if (document.getElementById('user-credits')) {
                document.getElementById('user-credits').textContent = usuario.creditos || 0;
            }

            // Mostrar la sección de progreso por defecto
            mostrarSeccion('progreso');

            // Cargar el estado de los desafíos completados
            cargarEstadoDesafios(usuario);
        }

        function cargarEstadoDesafios(usuario) {
            // Si el usuario tiene desafíos completados, actualizar la interfaz
            if (usuario && usuario.desafiosCompletados && Array.isArray(usuario.desafiosCompletados)) {
                usuario.desafiosCompletados.forEach(desafioId => {
                    const desafioElement = document.getElementById(`completeTask${desafioId}`);
                    if (desafioElement) {
                        const cardElement = desafioElement.closest('.challenge-card');
                        if (cardElement) {
                            // Marcar como completado visualmente
                            cardElement.classList.add('completed');

                            // Actualizar el estado del desafío
                            const statusElement = cardElement.querySelector('.challenge-status');
                            if (statusElement) {
                                if (statusElement.textContent.includes('/')) {
                                    const partes = statusElement.textContent.split('/');
                                    if (partes.length === 2) {
                                        statusElement.textContent = `${partes[1]}/${partes[1]}`;
                                    }
                                } else {
                                    statusElement.textContent = 'Completado';
                                }
                            }

                            // Mostrar y actualizar el botón
                            desafioElement.style.display = 'block';
                            desafioElement.innerHTML = '<i class="fas fa-check-circle"></i> Completado';
                            desafioElement.disabled = true;
                        }
                    }
                });
            }

            // Cargar desafíos adicionales que el usuario ya ha desbloqueado
            cargarDesafiosDesbloqueados(usuario);
        }

        function cargarDesafiosDesbloqueados(usuario) {
            // Si el usuario no tiene la propiedad desafiosMostrados, inicializarla
            if (!usuario.desafiosMostrados) {
                usuario.desafiosMostrados = [1, 2, 3, 4, 5]; // Desafíos iniciales
                localStorage.setItem('usuario_actual', JSON.stringify(usuario));

                // Actualizar en lista de usuarios
                let usuarios = JSON.parse(localStorage.getItem('usuarios'));
                const index = usuarios.findIndex(u => u.email === usuario.email);
                if (index !== -1) {
                    usuarios[index] = usuario;
                    localStorage.setItem('usuarios', JSON.stringify(usuarios));
                }

                return; // No hay desafíos adicionales que cargar
            }

            // Filtrar solo los desafíos adicionales (no los iniciales 1-5)
            const desafiosAdicionales = usuario.desafiosMostrados.filter(id => id > 5);

            // Si no hay desafíos adicionales, salir
            if (desafiosAdicionales.length === 0) return;

            // Contenedor de desafíos
            const container = document.querySelector('.challenges-grid');

            // Para cada desafío adicional
            desafiosAdicionales.forEach(desafioId => {
                        // Buscar en el banco de desafíos
                        const desafio = bancoDeSafios.find(d => d.id === desafioId);
                        if (!desafio) return; // Si no se encuentra, saltar

                        // Verificar si el desafío ya está completado
                        const completado = usuario.desafiosCompletados && usuario.desafiosCompletados.includes(desafioId);

                        // Crear elemento HTML para el desafío
                        const desafioHTML = `
                    <div class="challenge-card ${completado ? 'completed' : ''}" data-difficulty="${desafio.dificultad}">
                        <div class="challenge-header">
                            <h3 class="challenge-title">${desafio.titulo}</h3>
                            <span class="challenge-status">${completado ? (desafio.estado.includes('/') ? desafio.estado.split('/')[1] + '/' + desafio.estado.split('/')[1] : 'Completado') : desafio.estado}</span>
                        </div>
                        <div class="challenge-badges">
                            <span class="challenge-badge ${desafio.dificultad}">${desafio.dificultad === 'facil' ? 'Fácil' : desafio.dificultad === 'medio' ? 'Medio' : 'Difícil'}</span>
                            <span class="challenge-badge points">${desafio.puntos} puntos</span>
                        </div>
                        <p style="margin-bottom: 1rem; color: #64748b;">${desafio.descripcion}</p>
                        ${!completado ? `
                        <div class="file-upload">
                            <label class="file-upload-label" for="evidence${desafio.id}">
                                <i class="fas fa-cloud-upload-alt"></i>
                                Subir Evidencia
                            </label>
                            <input type="file" id="evidence${desafio.id}" onchange="subirEvidencia(${desafio.id})">
                        </div>
                        ` : ''}
                        <button class="btn btn-primary complete-task-btn" id="completeTask${desafio.id}" 
                            style="display: ${completado ? 'block' : 'none'}; margin-top: 1rem; width: 100%;" 
                            onclick="completarDesafio(${desafio.id})" ${completado ? 'disabled' : ''}>
                            <i class="fas fa-check-circle"></i> ${completado ? 'Completado' : 'Marcar como Completado'}
                        </button>
                    </div>
                `;
                
                // Agregar al DOM
                const temp = document.createElement('div');
                temp.innerHTML = desafioHTML;
                container.appendChild(temp.firstElementChild);
            });
        }

        function mostrarSeccion(seccionId) {
            // Ocultar todas las secciones
            document.querySelectorAll('.dashboard-section').forEach(seccion => {
                seccion.classList.remove('active');
            });
            
            // Mostrar la sección seleccionada
            document.getElementById(seccionId).classList.add('active');
            
            // Actualizar estado activo de los botones móviles
            document.querySelectorAll('.mobile-nav .nav-item').forEach(btn => {
                if (btn.textContent.trim().toLowerCase().includes(seccionId)) {
                    btn.classList.add('active');
                } else {
                    btn.classList.remove('active');
                }
            });

            // Actualizar estado activo de los botones de escritorio
            document.querySelectorAll('.desktop-nav .btn-primary').forEach(btn => {
                if (btn.textContent.trim().toLowerCase().includes(seccionId)) {
                    btn.classList.add('active');
                } else {
                    btn.classList.remove('active');
                }
            });

            if (seccionId === 'recompensas') {
                cargarCupones();
                
                // Verificar si el usuario es administrador (puedes ajustar esta lógica según tus necesidades)
                if (usuario.email === 'admin@econnect.com') {
                    document.getElementById('admin-cupones').style.display = 'block';
                }
            }
        }

        function subirEvidencia(desafioId) {
            const evidenciaInput = document.getElementById(`evidence${desafioId}`);
            const archivo = evidenciaInput.files[0];

            if (!archivo) {
                return;
            }

            alert(`¡Evidencia del Desafío ${desafioId} subida con éxito!`);
            
            // Obtener información del desafío
            const desafioElement = evidenciaInput.closest('.challenge-card');
            const dificultad = desafioElement ? desafioElement.dataset.difficulty : 'facil';
            
            // Calcular puntos y créditos según dificultad
            let puntos = 25;
            let creditos = 5;
            
            switch(dificultad) {
                case 'medio':
                    puntos = 50;
                    creditos = 10;
                    break;
                case 'dificil':
                    puntos = 100;
                    creditos = 20;
                    break;
            }
            
            // Actualizar puntos y créditos del usuario
            const usuario = JSON.parse(localStorage.getItem('usuario_actual'));
            usuario.puntos += puntos;
            usuario.creditos = (usuario.creditos || 0) + creditos;
            
            if (usuario.puntos >= 100) {
                usuario.nivel++;
                usuario.puntos -= 100;
            }
            
            localStorage.setItem('usuario_actual', JSON.stringify(usuario));
            
            // Actualizar interfaz
            document.getElementById('nivel-badge').textContent = `Nivel ${usuario.nivel}`;
            if (document.getElementById('user-credits')) {
                document.getElementById('user-credits').textContent = usuario.creditos;
            }
            
            // Actualizar en la lista de usuarios
            let usuarios = JSON.parse(localStorage.getItem('usuarios'));
            const index = usuarios.findIndex(u => u.email === usuario.email);
            if (index !== -1) {
                usuarios[index] = usuario;
                localStorage.setItem('usuarios', JSON.stringify(usuarios));
            }
            
            // Mostrar el botón de marcar como completado
            const completeButton = document.getElementById(`completeTask${desafioId}`);
            if (completeButton) {
                completeButton.style.display = 'block';
                
                // Ocultar el selector de archivos después de subir la evidencia
                const fileUpload = desafioElement.querySelector('.file-upload');
                if (fileUpload) {
                    fileUpload.style.display = 'none';
                }
                
                // Mostrar mensaje de evidencia subida
                const evidenciaMsg = document.createElement('div');
                evidenciaMsg.className = 'evidence-message';
                evidenciaMsg.innerHTML = `
                    <div style="display: flex; align-items: center; margin: 1rem 0; color: var(--primary-color);">
                        <i class="fas fa-check-circle" style="font-size: 1.2rem; margin-right: 0.5rem;"></i>
                        <span>Evidencia subida: ${archivo.name}</span>
                    </div>
                `;
                
                // Insertar el mensaje antes del botón de completar
                desafioElement.insertBefore(evidenciaMsg, completeButton);
            }
        }
        
        function completarDesafio(desafioId) {
            const desafioElement = document.getElementById(`completeTask${desafioId}`).closest('.challenge-card');
            if (!desafioElement) return;
            
            // Agregar efecto de carga
            desafioElement.classList.add('loading');
            const completeButton = document.getElementById(`completeTask${desafioId}`);
            completeButton.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Procesando...';
            completeButton.disabled = true;
            
            // Simular proceso (para efecto visual)
            setTimeout(() => {
                // Marcar desafío como completado
                desafioElement.classList.remove('loading');
                desafioElement.classList.add('completed');
                
                // Actualizar el estado del desafío
                const statusElement = desafioElement.querySelector('.challenge-status');
                const titulo = desafioElement.querySelector('.challenge-title').textContent;
                
                if (statusElement) {
                    if (statusElement.textContent.includes('/')) {
                        const partes = statusElement.textContent.split('/');
                        if (partes.length === 2) {
                            statusElement.textContent = `${partes[1]}/${partes[1]}`;
                        }
                    } else {
                        statusElement.textContent = 'Completado';
                    }
                }
                
                // Actualizar botón
                completeButton.innerHTML = '<i class="fas fa-check-circle"></i> Completado';
                completeButton.disabled = true;
                
                // Guardar estado del desafío en almacenamiento local
                const usuario = JSON.parse(localStorage.getItem('usuario_actual'));
                if (!usuario.desafiosCompletados) {
                    usuario.desafiosCompletados = [];
                }
                
                // Evitar duplicados
                if (!usuario.desafiosCompletados.includes(desafioId)) {
                    usuario.desafiosCompletados.push(desafioId);
                    
                    // Añadir puntos extra por completar desafío
                    const puntosExtra = 20;
                    usuario.puntos += puntosExtra;
                    
                    // Actualizar nivel si es necesario
                    if (usuario.puntos >= 100) {
                        usuario.nivel++;
                        usuario.puntos -= 100;
                    }
                    
                    localStorage.setItem('usuario_actual', JSON.stringify(usuario));
                    
                    // Actualizar contador de nivel
                    document.getElementById('nivel-badge').textContent = `Nivel ${usuario.nivel}`;
                    
                    // Actualizar en lista de usuarios
                    let usuarios = JSON.parse(localStorage.getItem('usuarios'));
                    const index = usuarios.findIndex(u => u.email === usuario.email);
                    if (index !== -1) {
                        usuarios[index] = usuario;
                        localStorage.setItem('usuarios', JSON.stringify(usuarios));
                    }
                    
                    // Mostrar notificación de éxito
                    mostrarNotificacion(`¡Felicidades! Has completado el desafío "${titulo}" y has ganado ${puntosExtra} puntos adicionales.`);
                    
                    // Añadir animación de confeti
                    mostrarConfeti();
                    
                    // Agregar un nuevo desafío
                    setTimeout(() => {
                        agregarNuevoDesafio();
                    }, 2000);
                }
            }, 1500); // Simular proceso por 1.5 segundos
        }
        
        // Banco de desafíos adicionales
        const bancoDeSafios = [
            {
                id: 101,
                titulo: "Limpieza de Playa",
                descripcion: "Participa en una jornada de limpieza de playa o río en tu comunidad.",
                dificultad: "medio",
                puntos: 120,
                estado: "0/1"
            },
            {
                id: 102,
                titulo: "Huerto Urbano",
                descripcion: "Crea un pequeño huerto urbano en tu hogar con plantas comestibles.",
                dificultad: "facil",
                puntos: 80,
                estado: "0/1"
            },
            {
                id: 103,
                titulo: "Cero Plásticos",
                descripcion: "Evita el uso de plásticos de un solo uso durante una semana completa.",
                dificultad: "medio",
                puntos: 100,
                estado: "0/7 días"
            },
            {
                id: 104,
                titulo: "Taller Ecológico",
                descripcion: "Organiza un taller sobre reciclaje o sostenibilidad en tu comunidad.",
                dificultad: "dificil",
                puntos: 200,
                estado: "0/1"
            },
            {
                id: 105,
                titulo: "Compostaje",
                descripcion: "Implementa un sistema de compostaje para tus residuos orgánicos.",
                dificultad: "medio",
                puntos: 150,
                estado: "0/1"
            },
            {
                id: 106,
                titulo: "Transporte Cero Emisiones",
                descripcion: "Utiliza exclusivamente transporte sin emisiones (bicicleta, caminar) durante 5 días.",
                dificultad: "facil",
                puntos: 75,
                estado: "0/5 días"
            },
            {
                id: 107,
                titulo: "Ahorro Energético",
                descripcion: "Reduce tu consumo de energía eléctrica en un 15% durante un mes.",
                dificultad: "medio",
                puntos: 130,
                estado: "0/30 días"
            },
            {
                id: 108,
                titulo: "Reforestación",
                descripcion: "Participa en una campaña de reforestación o planta 3 árboles por tu cuenta.",
                dificultad: "dificil",
                puntos: 180,
                estado: "0/3"
            },
            {
                id: 109,
                titulo: "Educación Ambiental",
                descripcion: "Imparte una charla sobre medio ambiente en un colegio o centro comunitario.",
                dificultad: "dificil",
                puntos: 220,
                estado: "0/1"
            },
            {
                id: 110,
                titulo: "Consumo Local",
                descripcion: "Compra exclusivamente productos locales y de temporada durante 2 semanas.",
                dificultad: "medio",
                puntos: 140,
                estado: "0/14 días"
            }
        ];
        
        // Función para agregar un nuevo desafío
        function agregarNuevoDesafio() {
            // Verificar cuántos desafíos completados tiene el usuario
            const usuario = JSON.parse(localStorage.getItem('usuario_actual'));
            const desafiosCompletados = usuario.desafiosCompletados || [];
            
            // Obtener desafíos ya mostrados (incluyendo los iniciales 1-5)
            const desafiosMostrados = usuario.desafiosMostrados || [1, 2, 3, 4, 5];
            
            // Filtrar desafíos no mostrados aún
            const desafiosDisponibles = bancoDeSafios.filter(d => !desafiosMostrados.includes(d.id));
            
            // Si no hay más desafíos disponibles
            if (desafiosDisponibles.length === 0) {
                mostrarNotificacion("¡Has desbloqueado todos los desafíos disponibles! Pronto añadiremos más.");
                return;
            }
            
            // Seleccionar un desafío aleatorio
            const nuevoDesafio = desafiosDisponibles[Math.floor(Math.random() * desafiosDisponibles.length)];
            
            // Marcar como mostrado
            desafiosMostrados.push(nuevoDesafio.id);
            usuario.desafiosMostrados = desafiosMostrados;
            localStorage.setItem('usuario_actual', JSON.stringify(usuario));
            
            // Actualizar en lista de usuarios
            let usuarios = JSON.parse(localStorage.getItem('usuarios'));
            const index = usuarios.findIndex(u => u.email === usuario.email);
            if (index !== -1) {
                usuarios[index] = usuario;
                localStorage.setItem('usuarios', JSON.stringify(usuarios));
            }
            
            // Crear elemento HTML para el nuevo desafío
            const desafioHTML = `
                <div class="challenge-card" data-difficulty="${nuevoDesafio.dificultad}">
                    <div class="challenge-header">
                        <h3 class="challenge-title">${nuevoDesafio.titulo}</h3>
                        <span class="challenge-status">${nuevoDesafio.estado}</span>
                    </div>
                    <div class="challenge-badges">
                        <span class="challenge-badge ${nuevoDesafio.dificultad}">${nuevoDesafio.dificultad === 'facil' ? 'Fácil' : nuevoDesafio.dificultad === 'medio' ? 'Medio' : 'Difícil'}</span>
                        <span class="challenge-badge points">${nuevoDesafio.puntos} puntos</span>
                    </div>
                    <p style="margin-bottom: 1rem; color: #64748b;">${nuevoDesafio.descripcion}</p>
                    <div class="file-upload">
                        <label class="file-upload-label" for="evidence${nuevoDesafio.id}">
                            <i class="fas fa-cloud-upload-alt"></i>
                            Subir Evidencia
                        </label>
                        <input type="file" id="evidence${nuevoDesafio.id}" onchange="subirEvidencia(${nuevoDesafio.id})">
                    </div>
                    <button class="btn btn-primary complete-task-btn" id="completeTask${nuevoDesafio.id}" style="display: none; margin-top: 1rem; width: 100%;" onclick="completarDesafio(${nuevoDesafio.id})">
                        <i class="fas fa-check-circle"></i> Marcar como Completado
                    </button>
                </div>
            `;
            
            // Agregar el nuevo desafío al contenedor
            const container = document.querySelector('.challenges-grid');
            
            // Crear un elemento temporal para convertir la cadena HTML en un nodo DOM
            const temp = document.createElement('div');
            temp.innerHTML = desafioHTML;
            const nuevoDesafioElement = temp.firstElementChild;
            
            // Aplicar animación de entrada
            nuevoDesafioElement.style.opacity = '0';
            nuevoDesafioElement.style.transform = 'translateY(20px)';
            
            // Añadir al DOM
            container.appendChild(nuevoDesafioElement);
            
            // Mostrar notificación
            mostrarNotificacion(`¡Nuevo desafío desbloqueado: "${nuevoDesafio.titulo}"!`);
            
            // Animar entrada
            setTimeout(() => {
                nuevoDesafioElement.style.transition = 'all 0.5s ease';
                nuevoDesafioElement.style.opacity = '1';
                nuevoDesafioElement.style.transform = 'translateY(0)';
            }, 100);
        }
        
        function mostrarNotificacion(mensaje) {
            // Crear elemento de notificación
            const notificacion = document.createElement('div');
            notificacion.className = 'notificacion';
            notificacion.innerHTML = `
                <div style="position: fixed; bottom: 20px; right: 20px; background-color: var(--primary-color); color: white; 
                     padding: 1rem; border-radius: var(--border-radius); box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); 
                     z-index: 9999; max-width: 300px; animation: slideIn 0.3s ease;">
                    <div style="display: flex; align-items: center;">
                        <i class="fas fa-trophy" style="font-size: 1.5rem; margin-right: 0.75rem; color: #FFD700;"></i>
                        <div>
                            ${mensaje}
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(notificacion);
            
            // Eliminar después de 5 segundos
            setTimeout(() => {
                notificacion.style.animation = 'slideOut 0.3s ease forwards';
                setTimeout(() => {
                    document.body.removeChild(notificacion);
                }, 300);
            }, 5000);
        }
        
        function mostrarConfeti() {
            // Crear elemento de confeti
            const confeti = document.createElement('div');
            confeti.className = 'confeti-container';
            confeti.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                pointer-events: none;
                z-index: 9998;
            `;
            
            // Crear 50 piezas de confeti
            for (let i = 0; i < 50; i++) {
                const pieza = document.createElement('div');
                const color = ['#22c55e', '#3b82f6', '#f59e0b', '#ef4444'][Math.floor(Math.random() * 4)];
                const size = Math.random() * 10 + 5;
                const left = Math.random() * 100;
                const duration = Math.random() * 3 + 2;
                const delay = Math.random() * 2;
                
                pieza.style.cssText = `
                    position: absolute;
                    top: -20px;
                    left: ${left}%;
                    width: ${size}px;
                    height: ${size}px;
                    background-color: ${color};
                    border-radius: ${Math.random() > 0.5 ? '50%' : '0'};
                    animation: confeti ${duration}s ease-in forwards ${delay}s;
                `;
                
                confeti.appendChild(pieza);
            }
            
            document.body.appendChild(confeti);
            
            // Eliminar después de 5 segundos
            setTimeout(() => {
                document.body.removeChild(confeti);
            }, 5000);
        }

        function cerrarSesion() {
            if (confirm("¿Deseas cerrar sesión?")) {
                // Eliminar datos de sesión
                localStorage.removeItem("usuario_actual");
                
                // Ocultar elementos de usuario autenticado
                document.getElementById("main-nav").style.display = "none";
                document.getElementById("mobile-nav").style.display = "none";
                document.getElementById("app").style.display = "none";
                
                // Mostrar elementos de inicio
                document.getElementById("auth-nav").style.display = "flex";
                document.querySelector('.intro-section').style.display = 'block';
                document.getElementById("registro").style.display = "none";
                document.getElementById("login").style.display = "none";

                // Ajustar los botones de autenticación para móvil
                if (window.innerWidth <= 768) {
                    const authNav = document.getElementById('auth-nav');
                    authNav.style.flexDirection = 'row';
                    authNav.style.justifyContent = 'flex-end';
                    authNav.style.flex = '0 0 auto';
                    
                    // Aplicar estilos a los botones
                    const buttons = authNav.querySelectorAll('.btn');
                    buttons.forEach(btn => {
                        const text = btn.querySelector('.btn-text');
                        if (text) text.style.display = 'none';
                        
                        btn.style.width = '40px';
                        btn.style.height = '40px';
                        btn.style.padding = '0';
                        btn.style.borderRadius = '50%';
                        btn.style.minWidth = '40px';
                    });
                }

                // Reiniciar el carrusel
                slideActual = 0;
                actualizarCarrusel();
                
                // Hacer scroll al inicio de la página
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }

        function verPerfil() {
            const modal = document.getElementById("perfilModal");
            const usuarioActual = JSON.parse(localStorage.getItem("usuario_actual"));
            
            if (usuarioActual) {
                // Actualizar estadísticas
                document.getElementById("nivel-perfil").textContent = usuarioActual.nivel || 1;
                document.getElementById("puntos-perfil").textContent = usuarioActual.puntos || 0;
                document.getElementById("insignias-perfil").textContent = usuarioActual.insignias || 0;
                
                // Rellenar el formulario con los datos del usuario
                document.getElementById("perfilNombre").value = usuarioActual.nombre;
                document.getElementById("perfilEmail").value = usuarioActual.email;
                document.getElementById("perfilClave").value = "";
                
                // Mostrar el modal
                modal.style.display = "block";
            } else {
                alert("Debe iniciar sesión para ver su perfil");
                mostrarFormularioLogin();
            }
        }

        function cerrarModalPerfil() {
            document.getElementById("perfilModal").style.display = "none";
        }

        function actualizarPerfil(event) {
            event.preventDefault();
            
            const usuarioActual = JSON.parse(localStorage.getItem("usuario_actual"));
            const nuevoNombre = document.getElementById("perfilNombre").value;
            const nuevoEmail = document.getElementById("perfilEmail").value;
            const nuevaClave = document.getElementById("perfilClave").value;
            
            if (usuarioActual) {
                // Actualizar datos del usuario
                usuarioActual.nombre = nuevoNombre;
                usuarioActual.email = nuevoEmail;
                
                // Actualizar contraseña solo si se proporciona una nueva
                if (nuevaClave.trim() !== "") {
                    usuarioActual.clave = nuevaClave;
                }
                
                // Actualizar en localStorage
                localStorage.setItem("usuario_actual", JSON.stringify(usuarioActual));
                
                // Actualizar en la lista de usuarios
                const usuarios = JSON.parse(localStorage.getItem("usuarios") || "[]");
                const index = usuarios.findIndex(u => u.email === usuarioActual.email);
                if (index !== -1) {
                    usuarios[index] = usuarioActual;
                    localStorage.setItem("usuarios", JSON.stringify(usuarios));
                }
                
                // Cerrar modal y mostrar mensaje
                cerrarModalPerfil();
                mostrarMensaje("Perfil actualizado correctamente", "success");
            }
        }

        // Cerrar modal al hacer clic fuera de él
        window.onclick = function(event) {
            const modal = document.getElementById("perfilModal");
            if (event.target === modal) {
                cerrarModalPerfil();
            }
        }

        // Agregar listener para cambios de tamaño de ventana
        window.addEventListener('resize', () => {
            const usuarioActual = localStorage.getItem("usuario_actual");
            if (usuarioActual) {
                const mobileNav = document.getElementById("mobile-nav");
                if (window.innerWidth <= 768) {
                    mobileNav.style.display = "flex";
                } else {
                    mobileNav.style.display = "none";
                }
            }
        });

        // Funciones para manejo de cupones
        function cargarCupones() {
            const cupones = JSON.parse(localStorage.getItem('cupones') || '[]');
            const usuario = JSON.parse(localStorage.getItem('usuario_actual'));
            const container = document.getElementById('cupones-container');
            container.innerHTML = '';

            cupones.forEach(cupon => {
                const puedeReclamar = usuario.puntos >= cupon.puntos;
                const expirado = new Date(cupon.expiracion) < new Date();
                
                // Determinar clase CSS para la tienda
                let tiendaClase = '';
                let logoIcon = 'fa-tag';
                
                switch(cupon.tienda) {
                    case 'H&M':
                        tiendaClase = 'hm';
                        logoIcon = 'fa-tshirt';
                        break;
                    case 'Zara':
                        tiendaClase = 'zara';
                        logoIcon = 'fa-tshirt';
                        break;
                    case 'Walmart':
                        tiendaClase = 'walmart';
                        logoIcon = 'fa-shopping-cart';
                        break;
                    case 'Adidas':
                        tiendaClase = 'adidas';
                        logoIcon = 'fa-running';
                        break;
                    case 'Whole Foods':
                        tiendaClase = 'whole-foods';
                        logoIcon = 'fa-apple-alt';
                        break;
                    case 'Starbucks':
                        tiendaClase = 'starbucks';
                        logoIcon = 'fa-coffee';
                        break;
                    case 'The Body Shop':
                        tiendaClase = 'body-shop';
                        logoIcon = 'fa-spa';
                        break;
                    case 'Patagonia':
                        tiendaClase = 'patagonia';
                        logoIcon = 'fa-mountain';
                        break;
                    default:
                        logoIcon = 'fa-tag';
                }
                
                const cuponElement = document.createElement('div');
                cuponElement.className = `coupon-card ${tiendaClase}`;
                cuponElement.dataset.puntos = cupon.puntos;
                cuponElement.dataset.expiracion = cupon.expiracion;
                cuponElement.dataset.tienda = cupon.tienda || '';
                
                cuponElement.innerHTML = `
                    <div class="coupon-store">
                        <div class="store-logo">
                            <i class="fas ${logoIcon}"></i>
                        </div>
                        <div class="store-name">${cupon.tienda || 'Econnect'}</div>
                    </div>
                    <div class="coupon-header">
                        <div class="coupon-title">${cupon.titulo}</div>
                        <div class="coupon-points">${cupon.puntos} puntos</div>
                    </div>
                    <div class="coupon-code">${cupon.codigo}</div>
                    <div class="coupon-footer">
                        <div class="coupon-expiry">
                            <i class="fas fa-clock"></i>
                            Expira: ${new Date(cupon.expiracion).toLocaleDateString()}
                        </div>
                        <button class="coupon-claim" 
                                onclick="reclamarCupon('${cupon.codigo}')"
                                ${(!puedeReclamar || expirado) ? 'disabled' : ''}>
                            ${expirado ? 'Expirado' : puedeReclamar ? 'Reclamar' : 'Puntos insuficientes'}
                        </button>
                    </div>
                `;
                container.appendChild(cuponElement);
            });
        }

        function agregarCupon(event) {
            event.preventDefault();
            
            const cupon = {
                titulo: document.getElementById('cuponTitulo').value,
                codigo: document.getElementById('cuponCodigo').value,
                puntos: parseInt(document.getElementById('cuponPuntos').value),
                expiracion: document.getElementById('cuponExpiracion').value,
                tienda: document.getElementById('cuponTienda').value
            };

            let cupones = JSON.parse(localStorage.getItem('cupones') || '[]');
            cupones.push(cupon);
            localStorage.setItem('cupones', JSON.stringify(cupones));

            document.getElementById('formCupon').reset();
            cargarCupones();
            alert('Cupón agregado exitosamente');
        }

        function reclamarCupon(codigo) {
            const usuario = JSON.parse(localStorage.getItem('usuario_actual'));
            const cupones = JSON.parse(localStorage.getItem('cupones') || '[]');
            const cupon = cupones.find(c => c.codigo === codigo);

            if (cupon && usuario.puntos >= cupon.puntos) {
                usuario.puntos -= cupon.puntos;
                localStorage.setItem('usuario_actual', JSON.stringify(usuario));
                
                // Actualizar en la lista de usuarios
                let usuarios = JSON.parse(localStorage.getItem('usuarios'));
                const index = usuarios.findIndex(u => u.email === usuario.email);
                if (index !== -1) {
                    usuarios[index] = usuario;
                    localStorage.setItem('usuarios', JSON.stringify(usuarios));
                }

                alert(`¡Cupón reclamado exitosamente!\nCódigo: ${codigo}\nPuntos restantes: ${usuario.puntos}`);
                cargarCupones();
            }
        }

        // Funciones para el carrusel
        let slideActual = 0;
        const totalSlides = document.querySelectorAll('.carousel-item').length;

        function moverCarrusel(direccion) {
            slideActual = (slideActual + direccion + totalSlides) % totalSlides;
            actualizarCarrusel();
        }

        function irASlide(index) {
            slideActual = index;
            actualizarCarrusel();
        }

        function actualizarCarrusel() {
            const carrusel = document.querySelector('.carousel-inner');
            carrusel.style.transform = `translateX(-${slideActual * 100}%)`;
            
            // Actualizar indicadores
            document.querySelectorAll('.indicator').forEach((indicator, index) => {
                indicator.classList.toggle('active', index === slideActual);
            });
        }

        // Auto-avance del carrusel
        setInterval(() => moverCarrusel(1), 5000);

        // Script mejorado para ajustar los botones en móvil
        document.addEventListener('DOMContentLoaded', function() {
            function adjustMobileLayout() {
                const headerContent = document.querySelector('.header-content');
                const authNav = document.getElementById('auth-nav');
                const usuarioActual = localStorage.getItem("usuario_actual");
                
                // Forzar el estilo correcto en móvil
                if (window.innerWidth <= 768) {
                    headerContent.style.flexDirection = 'row';
                    headerContent.style.justifyContent = 'space-between';
                    headerContent.style.alignItems = 'center';
                    
                    // Si el usuario está autenticado, ocultar los botones de auth
                    if (usuarioActual) {
                        if (authNav) {
                            authNav.style.display = 'none';
                        }
                    }
                    // Si no está autenticado, mostrar botones de auth
                    else if (authNav) {
                        authNav.style.display = 'flex';
                        authNav.style.flexDirection = 'row';
                        authNav.style.justifyContent = 'flex-end';
                        authNav.style.flex = '0 0 auto';
                        
                        // Aplicar estilos a los botones
                        const buttons = authNav.querySelectorAll('.btn');
                        buttons.forEach(btn => {
                            const text = btn.querySelector('.btn-text');
                            if (text) text.style.display = 'none';
                            
                            btn.style.width = '40px';
                            btn.style.height = '40px';
                            btn.style.padding = '0';
                            btn.style.borderRadius = '50%';
                            btn.style.minWidth = '40px';
                        });
                    }
                }
            }
            
            // Ejecutar inmediatamente y en cada cambio de tamaño
            adjustMobileLayout();
            window.addEventListener('resize', adjustMobileLayout);
            
            // Como refuerzo, ejecutar después de un breve retraso para asegurar que los estilos se apliquen
            setTimeout(adjustMobileLayout, 100);
        });

        // Agregar texto de tooltip a los botones de icono
        document.addEventListener('DOMContentLoaded', function() {
            const perfilBtn = document.getElementById('perfilBtn');
            const cerrarBtn = document.getElementById('cerrarBtn');
            
            if (perfilBtn) perfilBtn.setAttribute('data-tooltip', 'Mi Perfil');
            if (cerrarBtn) cerrarBtn.setAttribute('data-tooltip', 'Cerrar Sesión');
        });

        // Ajustar escala en dispositivos móviles
        document.addEventListener('DOMContentLoaded', function() {
            function adjustMobileScale() {
                // Reducir el contenido para evitar zoom excesivo
                if (window.innerWidth <= 768) {
                    const introSection = document.querySelector('.intro-section');
                    const appDescription = document.querySelector('.app-description');
                    
                    if (introSection) introSection.style.fontSize = '0.95rem';
                    if (appDescription) {
                        appDescription.style.fontSize = '0.95rem';
                        appDescription.style.width = '100%';
                    }
                }
            }
            
            // Ejecutar al cargar y al cambiar tamaño
            adjustMobileScale();
            window.addEventListener('resize', adjustMobileScale);
        });

        // Funciones para la sección de desafíos y cupones
        function filtrarDesafios() {
            const filtro = document.getElementById('filter-challenge').value;
            const desafios = document.querySelectorAll('.challenge-card');
            
            desafios.forEach(desafio => {
                if (filtro === 'todos' || desafio.dataset.difficulty === filtro) {
                    desafio.style.display = 'block';
                } else {
                    desafio.style.display = 'none';
                }
            });
        }
        
        // Funciones para videos educativos
        function abrirVideo(videoId, titulo, descripcion) {
            const modal = document.getElementById('videoModal');
            const iframe = document.getElementById('videoIframe');
            const videoTitle = document.getElementById('videoTitle');
            const videoDescription = document.getElementById('videoDescription');
            
            // Configurar el iframe con el video
            iframe.src = `https://www.youtube.com/embed/${videoId}?autoplay=1&rel=0`;
            
            // Actualizar título y descripción
            videoTitle.textContent = titulo;
            videoDescription.textContent = descripcion;
            
            // Mostrar el modal
            modal.style.display = 'flex';
            
            // Prevenir scroll en el body
            document.body.style.overflow = 'hidden';
        }
        
        function cerrarVideo() {
            const modal = document.getElementById('videoModal');
            const iframe = document.getElementById('videoIframe');
            
            // Detener el video
            iframe.src = '';
            
            // Ocultar el modal
            modal.style.display = 'none';
            
            // Restaurar scroll en el body
            document.body.style.overflow = 'auto';
        }
        
        function filtrarVideos(categoria) {
            const videos = document.querySelectorAll('.video-card');
            const filtros = document.querySelectorAll('.video-filter');
            
            // Actualizar botones de filtro
            filtros.forEach(filtro => {
                if (filtro.textContent.toLowerCase().includes(categoria) || 
                    (filtro.textContent.toLowerCase() === 'todos' && categoria === 'todos')) {
                    filtro.classList.add('active');
                } else {
                    filtro.classList.remove('active');
                }
            });
            
            // Filtrar videos
            videos.forEach(video => {
                if (categoria === 'todos' || video.dataset.category === categoria) {
                    video.style.display = 'block';
                } else {
                    video.style.display = 'none';
                }
            });
        }
        
        // Cerrar el modal de video al hacer clic fuera del contenido
        window.addEventListener('click', function(event) {
            const modal = document.getElementById('videoModal');
            if (event.target === modal) {
                cerrarVideo();
            }
        });
        
        // Cerrar el modal de video con la tecla ESC
        window.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                cerrarVideo();
            }
        });

        function filtrarCupones() {
            const filtro = document.getElementById('filter-coupon').value;
            let cupones = Array.from(document.querySelectorAll('.coupon-card'));
            const container = document.getElementById('cupones-container');
            const tiendasFilter = document.getElementById('tiendas-filter');
            
            // Mostrar u ocultar el filtro de tiendas
            if (filtro === 'tiendas') {
                tiendasFilter.style.display = 'block';
                return; // No hacemos más cambios, esperamos que el usuario seleccione una tienda
            } else {
                tiendasFilter.style.display = 'none';
            }
            
            switch(filtro) {
                case 'menor':
                    cupones.sort((a, b) => parseInt(a.dataset.puntos) - parseInt(b.dataset.puntos));
                    break;
                case 'mayor':
                    cupones.sort((a, b) => parseInt(b.dataset.puntos) - parseInt(a.dataset.puntos));
                    break;
                case 'fecha':
                    cupones.sort((a, b) => new Date(a.dataset.expiracion) - new Date(b.dataset.expiracion));
                    break;
            }
            
            container.innerHTML = '';
            cupones.forEach(cupon => container.appendChild(cupon));
        }
        
        function filtrarPorTienda(tienda) {
            const cupones = Array.from(document.querySelectorAll('.coupon-card'));
            const container = document.getElementById('cupones-container');
            
            container.innerHTML = '';
            
            if (tienda === 'todas') {
                cupones.forEach(cupon => container.appendChild(cupon));
            } else {
                const cuponesFiltrados = cupones.filter(cupon => cupon.dataset.tienda === tienda);
                
                if (cuponesFiltrados.length === 0) {
                    container.innerHTML = `
                        <div style="text-align: center; padding: 2rem; color: #64748b;">
                            <i class="fas fa-search" style="font-size: 2rem; margin-bottom: 1rem;"></i>
                            <p>No se encontraron cupones para ${tienda}.</p>
                        </div>
                    `;
                } else {
                    cuponesFiltrados.forEach(cupon => container.appendChild(cupon));
                }
            }
            
            // Resaltar el botón seleccionado
            document.querySelectorAll('#tiendas-filter .btn').forEach(btn => {
                if (btn.textContent === tienda || (btn.textContent === 'Todas' && tienda === 'todas')) {
                    btn.style.boxShadow = '0 0 0 2px white';
                    btn.style.transform = 'scale(1.05)';
                } else {
                    btn.style.boxShadow = 'none';
                    btn.style.transform = 'none';
                }
            });
        }

        function canjearCreditos(tipo, costo) {
            const creditsElement = document.getElementById('user-credits');
            let credits = parseInt(creditsElement.textContent);
            
            if (credits >= costo) {
                if (confirm(`¿Confirmar canje de ${costo} créditos para: ${tipo}?`)) {
                    credits -= costo;
                    creditsElement.textContent = credits;
                    
                    const usuario = JSON.parse(localStorage.getItem('usuario_actual'));
                    if (usuario) {
                        usuario.creditos = credits;
                        localStorage.setItem('usuario_actual', JSON.stringify(usuario));
                        
                        // Actualizar en la lista de usuarios
                        let usuarios = JSON.parse(localStorage.getItem('usuarios') || '[]');
                        const index = usuarios.findIndex(u => u.email === usuario.email);
                        if (index !== -1) {
                            usuarios[index] = usuario;
                            localStorage.setItem('usuarios', JSON.stringify(usuarios));
                        }
                    }
                    
                    alert(`¡Canje realizado con éxito! Has contribuido a: ${tipo}`);
                }
            } else {
                alert('No tienes suficientes créditos para realizar este canje.');
            }
        }

        // Función para contactar como patrocinador
        function contactarPatrocinio() {
            // Crear modal para formulario de patrocinio
            const modal = document.createElement('div');
            modal.className = 'modal';
            modal.style.display = 'block';
            
            modal.innerHTML = `
                <div class="modal-content" style="max-width: 600px;">
                    <div class="modal-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                        <h3 class="modal-title">Conviértete en Patrocinador</h3>
                        <button class="close-modal" onclick="cerrarModalPatrocinio()" style="background: none; border: none; font-size: 1.5rem; cursor: pointer;">&times;</button>
                    </div>
                    
                    <p style="margin-bottom: 1.5rem; color: #64748b;">
                        Gracias por tu interés en apoyar nuestras iniciativas ambientales. Complete el formulario y nuestro equipo se pondrá en contacto contigo para discutir las opciones de patrocinio.
                    </p>
                    
                    <form id="formPatrocinio" onsubmit="enviarFormularioPatrocinio(event)">
                        <div class="form-group">
                            <label for="empresaNombre">Nombre de la Empresa</label>
                            <input type="text" id="empresaNombre" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="contactoNombre">Nombre de Contacto</label>
                            <input type="text" id="contactoNombre" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="contactoEmail">Email de Contacto</label>
                            <input type="email" id="contactoEmail" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="contactoTelefono">Teléfono</label>
                            <input type="tel" id="contactoTelefono" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="nivelPatrocinio">Nivel de Patrocinio Interesado</label>
                            <select id="nivelPatrocinio" required>
                                <option value="">Seleccionar nivel</option>
                                <option value="Platino">Platino</option>
                                <option value="Oro">Oro</option>
                                <option value="Plata">Plata</option>
                                <option value="Bronce">Bronce</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="comentarios">Comentarios Adicionales</label>
                            <textarea id="comentarios" rows="4" style="width: 100%; padding: 0.75rem; border: 1px solid #e5e7eb; border-radius: var(--border-radius); font-size: 1rem; resize: vertical;"></textarea>
                        </div>
                        
                        <button type="submit" class="btn btn-primary" style="margin-top: 1rem; width: 100%;">
                            <i class="fas fa-paper-plane"></i>
                            Enviar Solicitud
                        </button>
                    </form>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // Prevenir scroll en el body
            document.body.style.overflow = 'hidden';
        }
        
        function cerrarModalPatrocinio() {
            const modal = document.querySelector('.modal');
            if (modal) {
                document.body.removeChild(modal);
                // Restaurar scroll en el body
                document.body.style.overflow = 'auto';
            }
        }
        
        function enviarFormularioPatrocinio(event) {
            event.preventDefault();
            
            const empresa = document.getElementById('empresaNombre').value;
            const contacto = document.getElementById('contactoNombre').value;
            const email = document.getElementById('contactoEmail').value;
            const telefono = document.getElementById('contactoTelefono').value;
            const nivel = document.getElementById('nivelPatrocinio').value;
            
            // Aquí se podría implementar el envío real de los datos a un servidor
            // Por ahora, solo mostraremos un mensaje de éxito
            
            // Guardar solicitud en localStorage para demostración
            const solicitud = {
                empresa,
                contacto,
                email,
                telefono,
                nivel,
                comentarios: document.getElementById('comentarios').value,
                fecha: new Date().toISOString()
            };
            
            let solicitudes = JSON.parse(localStorage.getItem('solicitudes_patrocinio') || '[]');
            solicitudes.push(solicitud);
            localStorage.setItem('solicitudes_patrocinio', JSON.stringify(solicitudes));
            
            // Cerrar el modal
            cerrarModalPatrocinio();
            
            // Mostrar mensaje de éxito
            mostrarNotificacion(`¡Gracias por tu interés! Hemos recibido la solicitud de ${empresa} y nos pondremos en contacto pronto.`);
        }

        // Función para volver a la página de inicio al hacer clic en el logo
        function volverInicio() {
            const usuarioActual = localStorage.getItem("usuario_actual");
            
            if (usuarioActual) {
                // Si hay un usuario logueado, mostrar su dashboard
                document.querySelector('.intro-section').style.display = 'none';
                document.getElementById("registro").style.display = "none";
                document.getElementById("login").style.display = "none";
                document.getElementById("app").style.display = "block";
                mostrarSeccion('progreso');
            } else {
                // Si no hay usuario logueado, mostrar la página de inicio
                document.querySelector('.intro-section').style.display = 'block';
                document.getElementById("auth-nav").style.display = "flex";
                document.getElementById("registro").style.display = "none";
                document.getElementById("login").style.display = "none";
                document.getElementById("app").style.display = "none";
                document.getElementById("main-nav").style.display = "none";
                document.getElementById("mobile-nav").style.display = "none";
                
                // Hacer scroll al inicio de la página
                window.scrollTo({ top: 0, behavior: 'smooth' });
                
                // Reiniciar el carrusel
                slideActual = 0;
                actualizarCarrusel();
                
                // Aplicar estilos específicos para botones en modo móvil
                if (window.innerWidth <= 768) {
                    const authNav = document.getElementById('auth-nav');
                    authNav.style.flexDirection = 'row';
                    authNav.style.justifyContent = 'flex-end';
                    authNav.style.flex = '0 0 auto';
                    
                    // Aplicar estilos a los botones
                    const buttons = authNav.querySelectorAll('.btn');
                    buttons.forEach(btn => {
                        const text = btn.querySelector('.btn-text');
                        if (text) text.style.display = 'none';
                        
                        btn.style.width = '40px';
                        btn.style.height = '40px';
                        btn.style.padding = '0';
                        btn.style.borderRadius = '50%';
                        btn.style.minWidth = '40px';
                    });
                }
            }
        }

        function cerrarBienvenida() {
            const overlay = document.getElementById("welcomeOverlay");
            overlay.style.animation = "fadeOut 0.5s ease forwards";
            
            // Marcar como mostrado para no volver a mostrar en esta sesión
            localStorage.setItem("bienvenida_mostrada", "true");
            
            // Eliminar el overlay después de la animación
            setTimeout(() => {
                overlay.style.display = "none";
                overlay.style.animation = "";
            }, 500);
        }
        
        function mostrarBienvenida(tipo, nombre = "") {
            const overlay = document.getElementById("welcomeOverlay");
            const titulo = overlay.querySelector(".welcome-title");
            const texto = overlay.querySelector(".welcome-text");
            const boton = overlay.querySelector(".welcome-button");
            
            // Personalizar el mensaje según el tipo
            switch(tipo) {
                case "registro":
                    titulo.textContent = `¡Bienvenido a Econnect, ${nombre}!`;
                    texto.textContent = "Gracias por unirte a nuestra comunidad. Tu viaje hacia un estilo de vida más sostenible comienza ahora. Completa desafíos, gana puntos y contribuye a un planeta más verde.";
                    boton.textContent = "Comenzar mi aventura";
                    break;
                    
                case "login":
                    titulo.textContent = `¡Hola de nuevo, ${nombre}!`;
                    texto.textContent = "Nos alegra verte de vuelta. Continúa con tus desafíos ambientales y sigue haciendo la diferencia en nuestro planeta.";
                    boton.textContent = "Continuar mi viaje";
                    break;
                    
                default: // visitante
                    titulo.textContent = "¡Bienvenido a Econnect!";
                    texto.textContent = "Descubre cómo pequeñas acciones pueden generar un gran impacto en nuestro planeta. Únete a nuestra comunidad comprometida con el medio ambiente.";
                    boton.textContent = "Explorar";
            }
            
            // Mostrar el overlay con animación
            overlay.style.display = "flex";
            
            // No marcar como mostrado para visitantes (se hará al cerrar)
            // Para login y registro, marcar inmediatamente
            if (tipo !== "visitante") {
                localStorage.setItem("bienvenida_mostrada", "true");
            }
        }

        function toggleInfo(id) {
            // Eliminando función toggleInfo
        }

        function mostrarMensaje(mensaje, tipo = "info") {
            // Crear elemento de notificación
            const notificacion = document.createElement("div");
            notificacion.className = `notificacion ${tipo}`;
            notificacion.textContent = mensaje;
            
            // Agregar al DOM
            document.body.appendChild(notificacion);
            
            // Mostrar con animación
            setTimeout(() => {
                notificacion.classList.add("show");
            }, 10);
            
            // Ocultar después de 3 segundos
            setTimeout(() => {
                notificacion.classList.remove("show");
                setTimeout(() => {
                    document.body.removeChild(notificacion);
                }, 300);
            }, 3000);
        }
    </script>
</body>
</html>
